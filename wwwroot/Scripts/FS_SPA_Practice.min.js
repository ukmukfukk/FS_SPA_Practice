import { Start as gb } from "./WebSharper.Core.JavaScript/Runtime.js"
import { Lazy as gc, Create as gd, MarkResizable as ge, SetOptional as gf, GetOptional as gg, CreateFuncWithArgs as gh, DeleteEmptyFields as gi, OnLoad as gj } from "./WebSharper.Core.JavaScript/Runtime.js"
function a(gk){ return"Dispose"in gk;}
function b(){ const gk=d.Create_1("");const gl=e((gy) => gy, g.Empty);const gm=null;const gn=br(() => bs(h(), (gy) => { gl.Set(gy);return bt();}));bu(gn, null);const go=b6.Convert((gy) => { const gz=new s("New_1");const gA=(gz.h.push(new bM("name", gy)),gz);const gB=I(gA.k, gA.h, []);const gC=new n(gB[1], F(gB[0]));let gD=(gA.i=gC,gC);return gD.Doc;}, gl.v);const gp=new s("New_1");const gq=(gp.h.push(new bK("listcontainer", go)),gp);const gr=(gq.h.push(H(gq.k, "loadusers", () => gq.i, () => { bu(gn, null);})),gq);const gs=(gr.h.push(new bJ("name", gk)),gr);const gt=(gs.h.push(H(gs.k, "add", () => gs.i, () => { bv(i(gk.Get()), null);gk.Set("");bu(gn, null);})),gs);const gu=I(gt.k, gt.h, [["name", 0, null]]);const gv=new n(gu[1], G(gu[0]));let gw=(gt.i=gv,gv);const gx=gw.Doc;bO("");b6.RunById("main", gx);}
class c { Equals(gk){ return this===gk;} GetHashCode(){ return -1;} }
let d=gc((gk) => class gl extends c { static { d=gk(this);} static Create_1(gm){ return new L(false, {s:b_(gm, [])}, gm);} static { } });
function e(gk, gl){ return f(gk, $(cc(gl)));}
function f(gk, gl){ return new j("New", gk, gl);}
class g { static Empty=gd(g, {$:0});static Cons(gk, gl){ return gd(g, {$:1, $0:gk, $1:gl});} GetEnumerator(){ return new dd(this, null, (gk) => { const gl=gk.s;return gl.$==0?false:(gk.c=gl.$0,gk.s=gl.$1,true);}, void 0);} }
function h(){ return bs((new bG()).Async("Server/GetUsers", []), (gk) => bB(((bH(bI()))())(gk)));}
function i(gk){ return(new bG()).Async("Server/AddName", [gk]);}
class j extends c { key;u0076ar;storage;v;it;Set(gk){ this.u0076ar.Set(this.storage.SSet(gk));this.ObsoleteAll();} ObsoleteAll(){ ba((gk) => { cD(gk.V);}, this.it);this.it.Clear();} GetEnumerator(){ return cR(this.u0076ar.Get());} GetEnumerator0(){ return cU(this.u0076ar.Get());} static New(gk, gl){ return new this("New", gk, gl);} static New_3(gk, gl, gm){ return new this("New_3", gk, gl, gm);} constructor(gk, gl, gm, gn){ let go;let gp;if(gk=="New"){ go=gl;gp=gm;gk="New_3";gl=go;gm=d.Create_1(cc(bc(go, gp.SInit())));gn=gp;} if(gk=="New_3"){ const gq=gl;const gr=gm;const gs=gn;super();this.key=gq;this.u0076ar=gr;this.storage=gs;this.v=c4((gt) => gt.slice(), this.u0076ar.View);this.it=new cC("New_5");} } }
function k(gk){ throw new Error(gk);}
function l(gk){ return[gk.K, gk.V];}
function m(gk, gl){ const gm=1+gl-gk;return gm<=0?[]:bk(gm, (gn) => gn+gk);}
class n extends c { doc;allVars;anchorRoot;get Doc(){ return this.doc;} SetAnchorRoot(gk){ this.anchorRoot=gk;} constructor(gk, gl){ super();this.doc=gl;this.allVars=gk.$==0?gk.$0:k("Should not happen");this.anchorRoot=null;} }
function o(gk, gl){ q(gk, gl);return gk[gl];}
function p(gk){ return gk.dims===2?gk.length*gk.length:gk.length;}
function q(gk, gl){ if(gl<0||gl>=gk.length)k("Index was outside the bounds of the array.");}
function r(gk, gl, gm){ q(gk, gl);gk[gl]=gm;}
class s extends c { i;k;h;s;static New_1(){ return new this("New_1");} constructor(gk){ if(gk=="New_1"){ let gl;super();this.i=null;this.k=(gl=bL(),String(gl));this.h=ge([]);gf(this, "s", null);} } }
class t extends c { ForTextView(){ console.warn("Content hole filled with attribute data", this.Name);return null;} AddAttribute(gk, gl){ console.warn("Var hole filled with non-Var data", this.Name);} get AsChoiceView(){ console.warn("Attribute value hole filled with non-text data", this.Name);return eR("");} }
function u(gk, gl){ if(gk===gl)return true;else { const gm=typeof gk;if(gm=="object"){ if(gk===null||gk===void 0||gl===null||gl===void 0||!u(typeof gl, "object"))return false;else if("Equals"in gk)return gk.Equals(gl);else if("Equals"in gl)return false;else if(gk instanceof Array&&gl instanceof Array)return v(gk, gl);else if(gk instanceof Date&&gl instanceof Date)return w(gk, gl);else { const gn=[true];let go;for(var gq in gk)if(((gr) => { gn[0]=!gk.hasOwnProperty(gr)||gl.hasOwnProperty(gr)&&u(gk[gr], gl[gr]);return!gn[0];})(gq))break;if(gn[0]){ let gp;for(var gr in gl)if(((gs) => { gn[0]=!gl.hasOwnProperty(gs)||gk.hasOwnProperty(gs);return!gn[0];})(gr))break;} return gn[0];} } else return gm=="function"&&("$Func"in gk?gk.$Func===gl.$Func&&gk.$Target===gl.$Target:"$Invokes"in gk&&"$Invokes"in gl&&v(gk.$Invokes, gl.$Invokes));} }
function v(gk, gl){ let gm;let gn;if(p(gk)===p(gl)){ gm=true;gn=0;while(gm&&gn<p(gk)){!u(o(gk, gn), o(gl, gn))?gm=false:void 0;gn=gn+1;} return gm;} else return false;}
function w(gk, gl){ return gk.getTime()===gl.getTime();}
function x(gk){ const gl=typeof gk;return gl=="function"?0:gl=="boolean"?gk?1:0:gl=="number"?gk:gl=="string"?y(gk):gl=="object"?gk==null?0:gk instanceof Array?z(gk):A(gk):0;}
function y(gk){ let gl;if(gk===null)return 0;else { gl=5381;for(let gm=0, gn=gk.length-1;gm<=gn;gm++)gl=B(gl, gk[gm].charCodeAt());return gl;} }
function z(gk){ let gl=-34948909;for(let gm=0, gn=p(gk)-1;gm<=gn;gm++)gl=B(gl, x(o(gk, gm)));return gl;}
function A(gk){ if("GetHashCode"in gk)return gk.GetHashCode();else { const gl=[0];let gm;for(var gn in gk)if(((go) => { gl[0]=B(B(gl[0], y(go)), x(gk[go]));return false;})(gn))break;return gl[0];} }
function B(gk, gl){ return(gk<<5)+gk+gl;}
function C(gk, gl){ if(gk===gl)return 0;else { const gm=typeof gk;switch(gm=="function"?1:gm=="boolean"?2:gm=="number"?2:gm=="string"?2:gm=="object"?3:0){ case 0:return typeof gl=="undefined"?0:-1;case 1:return k("Cannot compare function values.");case 2:return gk<gl?-1:1;case 3:if(gk===null)return -1;else if(gl===null)return 1;else if("CompareTo"in gk)return gk.CompareTo(gl);else if("CompareTo0"in gk)return gk.CompareTo0(gl);else if(gk instanceof Array&&gl instanceof Array)return D(gk, gl);else if(gk instanceof Date&&gl instanceof Date)return E(gk, gl);else { const gn=[0];let go;for(var gq in gk)if(((gr) =>!gk.hasOwnProperty(gr)?false:!gl.hasOwnProperty(gr)?(gn[0]=1,true):(gn[0]=C(gk[gr], gl[gr]),gn[0]!==0))(gq))break;if(gn[0]===0){ let gp;for(var gr in gl)if(((gs) =>!gl.hasOwnProperty(gs)?false:!gk.hasOwnProperty(gs)&&(gn[0]=-1,true))(gr))break;} return gn[0];} break;} } }
function D(gk, gl){ let gm;let gn;if(p(gk)<p(gl))return -1;else if(p(gk)>p(gl))return 1;else { gm=0;gn=0;while(gm===0&&gn<p(gk)){ gm=C(o(gk, gn), o(gl, gn));gn=gn+1;} return gm;} }
function E(gk, gl){ return C(gk.getTime(), gl.getTime());}
function F(gk){ bO("index");return gk?bP("index", K("listitem"), gk):void 0;}
function G(gk){ bO("index");return gk?bP("index", K("main"), gk):void 0;}
function H(gk, gl, gm, gn){ return new bN(gl, (go) =>(gp) => { const gq=gm();gq.SetAnchorRoot(go);return gn({Vars:gq, Anchors:gq, Target:go, Event:gp});});}
function I(gk, gl, gm){ const gn=new cC("New_5");const go=new cG("New_3");const gp=cR(gl);try { while(gp.MoveNext()){ const gq=gp.Current;const gr=gq.Name;go.SAdd(gr);gn.set_Item(gr, gq);} } finally { if(typeof gp=="object"&&a(gp))gp.Dispose();} return[bb(gl, cd((gs) => { const gt=gs[0];const gu=gs[1];const gv=gs[2];if(go.Contains(gt))return null;else { const gw=gu===0?cH.GetOrAddHoleFor(gk, gt, () => { const gx=gv==null?null:K(gv.$0);let gy=d.Create_1(gx==null?"":gx.$0);return new bJ(gt, gy);}):gu===1?cH.GetOrAddHoleFor(gk, gt, () => { const gx=gv==null?null:K(gv.$0);let gy=d.Create_1(gx==null?0:gx.$0);return new cI(gt, gy);}):gu===2?cH.GetOrAddHoleFor(gk, gt, () => { const gx=gv==null?null:K(gv.$0);let gy=d.Create_1(gx==null?false:gx.$0);return new cJ(gt, gy);}):gu===3?cH.GetOrAddHoleFor(gk, gt, () => { const gx=gv==null?null:K(gv.$0);let gy=d.Create_1(gx==null?-8640000000000000:gx.$0);return new cK(gt, gy);}):gu===4?cH.GetOrAddHoleFor(gk, gt, () => new cL(gt, d.Create_1([]))):gu===5?cH.GetOrAddHoleFor(gk, gt, () => new cM(gt, d.Create_1(K(globalThis.document.querySelector("[ws-dom="+gt+"]"))))):gu===6?cH.GetOrAddHoleFor(gk, gt, () => { const gx=gv==null?null:K(gv.$0);let gy=d.Create_1(gx==null?[]:gx.$0);return new cO(gt, gy);}):k("Invalid value type");gn.set_Item(gt, gw);return K(gw);} }, gm)), {$:0, $0:gn}];}
class J extends c { }
function K(gk){ return{$:1, $0:gk};}
class L extends J { isConst;current;snap;view;id;Set(gk){ if(this.isConst)(((gl) => gl("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((gl) => { console.log(gl);}));else { cD(this.snap);this.current=gk;this.snap={s:b_(gk, [])};} } Get(){ return this.current;} get View(){ return this.view;} SetFinal(gk){ if(this.isConst)(((gl) => gl("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((gl) => { console.log(gl);}));else { cD(this.snap);this.isConst=true;this.current=gk;this.snap={s:b$(gk)};} } UpdateMaybe(gk){ const gl=gk(this.Get());if(gl!=null&&gl.$==1)this.Set(gl.$0);} constructor(gk, gl, gm){ super();this.isConst=gk;this.current=gm;this.snap=gl;this.view=() => this.snap;this.id=b7();} }
function M(gk, gl){ const gm=gl.s;if(gm!=null&&gm.$==0)return{s:b$(gk(gm.$0))};else { const gn={s:ca([], [])};P(gl, (go) => { Q(gn, gl, gk(go));}, gn);return gn;} }
function N(gk, gl, gm){ const gn=gk.s;if(gn==null)gm();else gn!=null&&gn.$==2?(gn.$1.push(gm),gl(gn.$0)):gn!=null&&gn.$==3?(gn.$0.push(gl),gn.$1.push(gm)):gl(gn.$0);}
function O(gk, gl){ const gm=gk.s;if(gm==null)gl();else gm!=null&&gm.$==2?gm.$1.push(gl):gm!=null&&gm.$==3?gm.$1.push(gl):void 0;}
function P(gk, gl, gm){ const gn=gk.s;if(gn==null)cD(gm);else gn!=null&&gn.$==2?(W(gn.$1, gm),gl(gn.$0)):gn!=null&&gn.$==3?(gn.$0.push(gl),W(gn.$1, gm)):gl(gn.$0);}
function Q(gk, gl, gm){ const gn=gl.s;if(gn!=null&&gn.$==0)X(gk, gm);else Y(gk, gm);}
function R(gk, gl, gm, gn){ const go=gl.s;const gp=gm.s;const gq=gn.s;if(go!=null&&go.$==0)return gp!=null&&gp.$==0?gq!=null&&gq.$==0?{s:b$(gk(go.$0, gp.$0, gq.$0))}:u0030(gk, go.$0, gp.$0, gn):gq!=null&&gq.$==0?u0031(gk, go.$0, gq.$0, gm):u0032(gk, go.$0, gm, gn);else if(gp!=null&&gp.$==0)return gq!=null&&gq.$==0?u0033(gk, gp.$0, gq.$0, gl):u0034(gk, gp.$0, gl, gn);else if(gq!=null&&gq.$==0)return u0035(gk, gq.$0, gl, gm);else { const gr={s:ca([], [])};const gs=() => { const gt=gr.s;if(!(gt!=null&&gt.$==0||gt!=null&&gt.$==2)){ const gu=u0036(gl);const gv=u0036(gm);const gw=u0036(gn);if(gu!=null&&gu.$==1)if(gv!=null&&gv.$==1)if(gw!=null&&gw.$==1)if(gu.$0[1]&&gv.$0[1]&&gw.$0[1])X(gr, gk(gu.$0[0], gv.$0[0], gw.$0[0]));else Y(gr, gk(gu.$0[0], gv.$0[0], gw.$0[0]));} };P(gl, gs, gr);P(gm, gs, gr);P(gn, gs, gr);return gr;} }
function S(gk){ const gl=cc(gk);if(gl.length==0)return{s:b$([])};else { const gm={s:ca([], [])};const gn=[p(gl)-1];const go=() => { if(gn[0]===0){ const gp=cm((gq) => { const gr=gq.s;return gr!=null&&gr.$==0?gr.$0:gr!=null&&gr.$==2?gr.$0:k("value not found by View.Sequence");}, gl);if(cq((gq) => { const gr=gq.s;return gr!=null&&gr.$==0;}, gl))X(gm, gp);else Y(gm, gp);} else gn[0]=gn[0]-1;};ck((gp) => { P(gp, go, gm);}, gl);return gm;} }
function T(gk, gl, gm){ const gn=gl.s;const go=gm.s;if(gn!=null&&gn.$==0)return go!=null&&go.$==0?{s:b$(gk(gn.$0, go.$0))}:u0037(gk, gn.$0, gm);else if(go!=null&&go.$==0)return u0038(gk, go.$0, gl);else { const gp={s:ca([], [])};const gq=() => { const gr=gp.s;if(!(gr!=null&&gr.$==0||gr!=null&&gr.$==2)){ const gs=u0036(gl);const gt=u0036(gm);if(gs!=null&&gs.$==1)if(gt!=null&&gt.$==1)if(gs.$0[1]&&gt.$0[1])X(gp, gk(gs.$0[0], gt.$0[0]));else Y(gp, gk(gs.$0[0], gt.$0[0]));} };P(gl, gq, gp);P(gm, gq, gp);return gp;} }
function U(gk, gl){ const gm=gk.s;const gn=gl.s;if(gm!=null&&gm.$==0)return gn!=null&&gn.$==0?{s:b$(null)}:gl;else if(gn!=null&&gn.$==0)return gk;else { const go={s:ca([], [])};const gp=() => { const gq=go.s;if(!(gq!=null&&gq.$==0||gq!=null&&gq.$==2)){ const gr=u0036(gk);const gs=u0036(gl);if(gr!=null&&gr.$==1)if(gs!=null&&gs.$==1)if(gr.$0[1]&&gs.$0[1])X(go, null);else Y(go, null);} };P(gk, gp, go);P(gl, gp, go);return go;} }
function V(gk){ const gl=gk.s;if(gl==null)return gk;else if(gl!=null&&gl.$==2){ const gm={s:b_(gl.$0, [])};u0039(gk, gm);return gm;} else if(gl!=null&&gl.$==3){ const gn={s:ca([], [])};P(gk, (go) => { Q(gn, gk, go);}, gn);return gn;} else return gk;}
function W(gk, gl){ gk.push(gl);if(gk.length%20===0){ const gm=gk.slice(0);f4(gk);for(let go=0, gp=p(gm)-1;go<=gp;go++){ const gn=o(gm, go);if(typeof gn=="object")(((gq) => { if(gq.s)gk.push(gq);})(gn));else(((gq) => { gk.push(gq);})(gn));} } else void 0;}
function X(gk, gl){ const gm=gk.s;if(gm!=null&&gm.$==3){ gk.s=b$(gl);const gn=gm.$0;for(let go=0, gp=p(gn)-1;go<=gp;go++)(o(gn, go))(gl);} else void 0;}
function Y(gk, gl){ const gm=gk.s;if(gm!=null&&gm.$==3){ gk.s=b_(gl, gm.$1);const gn=gm.$0;for(let go=0, gp=p(gn)-1;go<=gp;go++)(o(gn, go))(gl);} else void 0;}
function Z(gk){ const gl={s:ca([], [])};P(gk, (gm) => { const gn=gm();P(gn, (go) => { let gp;const gq=gn.s;if(gq!=null&&gq.$==0){ const gr=gk.s;gp=gr!=null&&gr.$==0;} else gp=false;if(gp)X(gl, go);else Y(gl, go);}, gl);}, gl);return gl;}
function u0030(gk, gl, gm, gn){ return M((go) => gk(gl, gm, go), gn);}
function u0031(gk, gl, gm, gn){ return M((go) => gk(gl, go, gm), gn);}
function u0032(gk, gl, gm, gn){ return T((go, gp) => gk(gl, go, gp), gm, gn);}
function u0033(gk, gl, gm, gn){ return M((go) => gk(go, gl, gm), gn);}
function u0034(gk, gl, gm, gn){ return T((go, gp) => gk(go, gl, gp), gm, gn);}
function u0035(gk, gl, gm, gn){ return T((go, gp) => gk(go, gp, gl), gm, gn);}
function u0036(gk){ const gl=gk.s;return gl!=null&&gl.$==0?K([gl.$0, true]):gl!=null&&gl.$==2?K([gl.$0, false]):null;}
function u0037(gk, gl, gm){ return M((gn) => gk(gl, gn), gm);}
function u0038(gk, gl, gm){ return M((gn) => gk(gn, gl), gm);}
function u0039(gk, gl){ const gm=gk.s;if(gm==null)cD(gl);else gm!=null&&gm.$==2?W(gm.$1, gl):gm!=null&&gm.$==3?W(gm.$1, gl):void 0;}
function $(gk){ return new cb(gk);}
function ba(gk, gl){ const gm=cR(gl);try { while(gm.MoveNext())gk(gm.Current);} finally { if(typeof gm=="object"&&a(gm))gm.Dispose();} }
function bb(gk, gl){ return{GetEnumerator:() => { const gm=cR(gk);const gn=[true];return new dd(gm, null, (go) => { if(go.s.MoveNext()){ go.c=go.s.Current;return true;} else { const gp=go.s;if(!u(gp, null))gp.Dispose();go.s=null;return gn[0]&&(gn[0]=false,go.s=cR(gl),go.s.MoveNext()?(go.c=go.s.Current,true):(go.s.Dispose(),go.s=null,false));} }, (go) => { const gp=go.s;if(!u(gp, null))gp.Dispose();});}};}
function bc(gk, gl){ return{GetEnumerator:() => { const gm=cR(gl);const gn=new cG("New_3");return new dd(null, null, (go) => { let gp;let gq;if(gm.MoveNext()){ gp=gm.Current;gq=gn.SAdd(gk(gp));while(!gq&&gm.MoveNext()){ gp=gm.Current;gq=gn.SAdd(gk(gp));} return gq&&(go.c=gp,true);} else return false;}, () => { gm.Dispose();});}};}
function bd(gk){ const gl=cR(gk);try { return gl.MoveNext()?gl.Current:dZ();} finally { if(typeof gl=="object"&&a(gl))gl.Dispose();} }
function be(gk, gl, gm){ let gn=gl;const go=cR(gm);try { while(go.MoveNext())gn=gk(gn, go.Current);return gn;} finally { if(typeof go=="object"&&a(go))go.Dispose();} }
function bf(gk, gl){ return{GetEnumerator:() => { const gm=cR(gl);return new dd(null, null, (gn) => gm.MoveNext()&&(gn.c=gk(gm.Current),true), () => { gm.Dispose();});}};}
function bg(gk){ return{GetEnumerator:() => cR(gk())};}
function bh(gk, gl){ return bj(bf(gk, gl));}
function bi(gk){ const gl=cR(gk);try { if(!gl.MoveNext())bl();let gm=gl.Current;while(gl.MoveNext()){ const gn=gl.Current;if(C(gn, gm)===1)gm=gn;} return gm;} finally { if(typeof gl=="object"&&a(gl))gl.Dispose();} }
function bj(gk){ return{GetEnumerator:() => { const gl=cR(gk);function gm(gn){ while(true){ const go=gn.s;if(u(go, null)){ if(gl.MoveNext()){ gn.s=cR(gl.Current);gn=gn;} else { gl.Dispose();return false;} } else if(go.MoveNext()){ gn.c=go.Current;return true;} else { gn.Dispose();gn.s=null;gn=gn;} } } return new dd(null, null, gm, (gn) => { const go=gn.s;if(!u(go, null))go.Dispose();if(!u(gl, null))gl.Dispose();});}};}
function bk(gk, gl){ return bm(gk, bn(gl));}
function bl(){ return k("The input sequence was empty.");}
function bm(gk, gl){ gk<0?d1():void 0;return{GetEnumerator:() => { const gm=[cR(gl)];return new dd(0, null, (gn) => { gn.s=gn.s+1;if(gn.s>gk)return false;else { const go=gm[0];return u(go, null)?dZ():go.MoveNext()?(gn.c=go.Current,gn.s===gk?(go.Dispose(),gm[0]=null):void 0,true):(go.Dispose(),gm[0]=null,dZ());} }, () => { const gn=gm[0];if(!u(gn, null))gn.Dispose();});}};}
function bn(gk){ return{GetEnumerator:() => new dd(0, null, (gl) => { gl.c=gk(gl.s);gl.s=gl.s+1;return true;}, void 0)};}
function bo(gk, gl){ return!bp((gm) =>!gk(gm), gl);}
function bp(gk, gl){ const gm=cR(gl);try { let gn=false;while(!gn&&gm.MoveNext())gn=gk(gm.Current);return gn;} finally { if(typeof gm=="object"&&a(gm))gm.Dispose();} }
function bq(gk){ const gl={};const gm=cR(gk);try { while(gm.MoveNext()){ const gn=gm.Current;gl[gn[0]]=gn[1];} } finally { if(typeof gm=="object"&&a(gm))gm.Dispose();} return gl;}
function br(gk){ return(gl) => { try {(gk())(gl);} catch(gm){ gl.k(ct(gm));} };}
function bs(gk, gl){ return bw((gm) => { gk(cs((gn) => { if(gn.$==0){ const go=gn.$0;bA().Fork(() => { try {(gl(go))(gm);} catch(gp){ gm.k(ct(gp));} });} else bA().Fork(() => { gm.k(gn);});}, gm.ct));});}
function bt(){ return cE.Zero;}
function bu(gk, gl){ const gm=(bx())[0];const gn=gl==null?gm:gl.$0;if(!gn.c)gk(cs((go) => { if(go.$==1)by(go.$0);}, gn));}
function bv(gk, gl){ const gm=(bx())[0];const gn=gl==null?gm:gl.$0;bA().Fork(() => { if(!gn.c)gk(cs((go) => { if(go.$==1)by(go.$0);}, gn));});}
function bw(gk){ return(gl) => { if(gl.ct.c)bz(gl);else gk(gl);};}
function bx(){ return cE.defCTS;}
function by(gk){ console.log("WebSharper: Uncaught asynchronous exception", gk);}
function bz(gk){ gk.k(cv(new dC("New", gk.ct)));}
function bA(){ return cE.scheduler;}
function bB(gk){ return(gl) => { gl.k(cu(gk));};}
function bC(){ return cE.GetCT;}
function bD(gk){ return(gl) => { const gm=[false];const gn=(go) => { if(gm[0])k("A continuation provided by Async.FromContinuations was invoked multiple times");else { gm[0]=true;bA().Fork(go);} };gk((go) => { gn(() => { gl.k(cu(go));});}, (go) => { gn(() => { gl.k(ct(go));});}, (go) => { gn(() => { gl.k(cv(go));});});};}
function bE(gk, gl){ if(gk===bF())return{Dispose(){ return null;}};else { const gm=gk.r.push(gl)-1;return{Dispose(){ return r(gk.r, gm, () => { });}};} }
function bF(){ return cE.noneCT;}
class bG extends c { AsyncBase(gk, gl){ const gm=null;return br(() => { const gn=ec(this.Headers);const go=eb(gl);return bs(bC(), (gp) => bs(bD((gq, gr, gs) => { const gt=[true];const gu=bE(gp, () => { if(gt[0]){ gt[0]=false;gs(new dC("New", gp));} });return ea().Async(this.EndPoint+"/"+gk, gn, go, (gv) => { if(gt[0]){ gt[0]=false;gu.Dispose();gq(gv);} }, (gv) => { if(gt[0]){ gt[0]=false;gu.Dispose();gr(gv);} });}), (gq) => bB(JSON.parse(gq))));});} get EndPoint(){ return ed();} get Headers(){ return[];} Async(gk, gl){ return this.AsyncBase(gk, gl);} }
function bH(gk){ return() =>(gl) => { const gm=gk();return cw(p(gl), (gn) => gm(o(gl, gn)));};}
function bI(){ return() =>(gk) => gk;}
class bJ extends t { name;fillWith;get Name(){ return this.name;} ForTextView(){ return K(this.fillWith.View);} AddAttribute(gk, gl){(gk(gl))(eG(this.fillWith));} get AsChoiceView(){ return eS(c4(String, this.fillWith.View));} constructor(gk, gl){ super();this.name=gk;this.fillWith=gl;} }
class bK extends t { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} constructor(gk, gl){ super();this.name=gk;this.fillWith=gl;} }
function bL(){ return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new RegExp("[xy]", "g"), (gk) => { const gl=Math.random()*16|0;const gm=gk=="x"?gl:gl&3|8;return gm.toString(16);});}
class bM extends t { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} get AsChoiceView(){ return eR(this.fillWith);} constructor(gk, gl){ super();this.name=gk;this.fillWith=gl;} }
class bN extends t { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} constructor(gk, gl){ super();this.name=gk;this.fillWith=gl;} }
function bO(gk){!bQ()?(bR(true),bS(globalThis.document.body, "")):void 0;bT().set_Item(gk, bU(""));}
function bP(gk, gl, gm){ let gn;const go=(gn=null,[bU(gk).TryGetValue(gl==null?"":gl.$0, {get:() => gn, set:(gp) => { gn=gp;}}), gn]);return go[0]?bV(go[1].cloneNode(true), gm):(console.warn("Local template doesn't exist", gl),b6.Empty);}
function bQ(){ return de.LocalTemplatesLoaded;}
function bR(gk){ de.LocalTemplatesLoaded=gk;}
function bS(gk, gl){ const gm=bU(gl);const gn=new cC("New_5");const go=gk.querySelectorAll("[ws-template]");for(let gA=0, gB=go.length-1;gA<=gB;gA++){ const gp=go[gA];const gq=gp.getAttribute("ws-template").toLowerCase();gp.removeAttribute("ws-template");gn.set_Item(gq, bW(gp));} const gr=gk.querySelectorAll("[ws-children-template]");for(let gC=0, gD=gr.length-1;gC<=gD;gC++){ const gs=gr[gC];const gt=gs.getAttribute("ws-children-template").toLowerCase();gs.removeAttribute("ws-children-template");gn.set_Item(gt, bX(gs));} const gu=gk.querySelectorAll("template[id]");for(let gE=0, gF=gu.length-1;gE<=gF;gE++){ const gv=gu[gE];gn.set_Item(gv.getAttribute("id").toLowerCase(), bY(gv));} const gw=gk.querySelectorAll("template[name]");for(let gG=0, gH=gw.length-1;gG<=gH;gG++){ const gx=gw[gG];gn.set_Item(gx.getAttribute("name").toLowerCase(), bY(gx));} const gy=new cG("New_3");function gz(gI){ if(!gm.ContainsKey(gI)){ let gJ;const gK=(gJ=null,[gn.TryGetValue(gI, {get:() => gJ, set:(gL) => { gJ=gL;}}), gJ]);if(gK[0]){ gy.SAdd(gI);gn.RemoveKey(gI);bZ(gl, K(gI), gK[1], K(gz));} else console.warn(gy.Contains(gI)?"Encountered loop when instantiating "+gI:"Local template does not exist: "+gI);} } while(gn.count>0)gz(bd(gn.Keys));}
function bT(){ return de.LoadedTemplates;}
function bU(gk){ let gl;const gm=(gl=null,[bT().TryGetValue(gk, {get:() => gl, set:(go) => { gl=go;}}), gl]);if(gm[0])return gm[1];else { const gn=new cC("New_5");bT().set_Item(gk, gn);return gn;} }
function bV(gk, gl){ let gm;const gn=b0(gk, bb(gl, b1().Values));const go=gn[1];const gp=gn[0];const gq=gp.Els;return!u(gq, null)&&gq.length===1&&(o(gq, 0)instanceof Node&&(u(o(gq, 0).nodeType, Node.ELEMENT_NODE)&&(gm=o(gq, 0),true)))?dE.TreeNode(gp, go):b6.Mk(cX(gp), go);}
function bW(gk){ gk.removeAttribute("ws-template");const gl=gk.getAttribute("ws-replace");if(gl==null){ } else { gk.removeAttribute("ws-replace");const gm=gk.parentNode;if(u(gm, null)){ } else { const gn=globalThis.document.createElement(gk.tagName);gn.setAttribute("ws-replace", gl);gm.replaceChild(gn, gk);} } const go=globalThis.document.createElement("div");go.appendChild(gk);return go;}
function bX(gk){ const gl=globalThis.document.createElement("div");while(gk.hasChildNodes())gl.appendChild(gk.firstChild);return gl;}
function bY(gk){ const gl=globalThis.document.createElement("div");const gm=gk.content;for(let gn=0, go=gm.childNodes.length-1;gn<=go;gn++)gl.appendChild(gm.childNodes[gn].cloneNode(true));return gl;}
function bZ(gk, gl, gm, gn){ const go=new cG("New_3");function gp(gw, gx){ while(true)switch(gw){ case 0:if(gx!==null){ const gy=gx.nextSibling;if(u(gx.nodeType, Node.TEXT_NODE))dF(gx);else if(u(gx.nodeType, Node.ELEMENT_NODE))gr(gx);gx=gy;} else return null;break;case 1:const gz=dN(gx.nodeName, K(3), null).toLowerCase();const gA=gz.indexOf(".");const gB=gA===-1?[gk, gz]:[dN(gz, null, K(gA-1)), dN(gz, K(gA+1), null)];const gC=gB[1];const gD=gB[0];if(gD!=""&&!bT().ContainsKey(gD))return dG(gC);else { if(gD==""&&gn!=null)gn.$0(gC);const gE=bT().Item(gD);if(!gE.ContainsKey(gC))return dG(gC);else { const gF=gE.Item(gC);const gG=gF.cloneNode(true);const gH=new cG("New_3");const gI=new cC("New_5");const gJ=gx.attributes;for(let gT=0, gU=gJ.length-1;gT<=gU;gT++){ const gK=gJ.item(gT).name.toLowerCase();const gL=gJ.item(gT).nodeValue;let gM=gL==""?gK:gL.toLowerCase();gI.set_Item(gK, gM);if(!gH.SAdd(gK))console.warn("Hole mapped twice", gK);} for(let gV=0, gW=gx.childNodes.length-1;gV<=gW;gV++){ const gN=gx.childNodes[gV];if(u(gN.nodeType, Node.ELEMENT_NODE))if(!gH.SAdd(gN.nodeName.toLowerCase()))console.warn("Hole filled twice", gC);} const gO=gx.childNodes.length===1&&u(gx.firstChild.nodeType, Node.TEXT_NODE);if(gO){ const gP=dH(gG, gx.firstChild.textContent, gC);const gQ=((gX) =>(gY) => gX.SAdd(gY))(gH);let gR=((gX) =>(gY) => { if(gY!=null)gX(gY.$0);})((gX) => { gQ(gX);});gR(gP);} dI(gG, gH);if(!gO){ for(let gX=0, gY=gx.childNodes.length-1;gX<=gY;gX++){ const gS=gx.childNodes[gX];if(u(gS.nodeType, Node.ELEMENT_NODE))if(gS.hasAttributes())dJ(gG, gS);else gq(gG, gS);} } dK(gG, gI);dL(gG, gx.parentNode, gx);gx.parentNode.removeChild(gx);return;} } break;} } function gq(gw, gx){ const gy=gx.nodeName.toLowerCase();const gz=(gD, gE) => { if(gy=="title"&&gx.hasChildNodes()){ const gF=dO(gx.textContent);gx.removeChild(gx.firstChild);while(gF.hasChildNodes())gx.appendChild(gF.firstChild);} gr(gx);return dL(gx, gD, gE);};b2(gw, "[ws-attr-holes]", (gD) => { const gE=eU(gD.getAttribute("ws-attr-holes"), [" "], 1);for(let gI=0, gJ=gE.length-1;gI<=gJ;gI++){ const gF=o(gE, gI);let gG=new RegExp("\\${"+gy+"}", "ig");let gH=gD.getAttribute(gF).replace(gG, gx.textContent);gD.setAttribute(gF, gH);} });const gA=gw.querySelector("[ws-hole="+gy+"]");if(u(gA, null)){ const gB=gw.querySelector("[ws-replace="+gy+"]");if(u(gB, null)){ const gC=gw.querySelector("slot[name="+gy+"]");return gw.tagName.toLowerCase()=="template"?(gz(gC.parentNode, gC),void gC.parentNode.removeChild(gC)):null;} else { gz(gB.parentNode, gB);gB.parentNode.removeChild(gB);return;} } else { while(gA.hasChildNodes())gA.removeChild(gA.lastChild);gA.removeAttribute("ws-hole");return gz(gA, null);} } function gr(gw){ if(!gw.hasAttribute("ws-preserve"))if(eV(gw.nodeName.toLowerCase(), "ws-"))gt(gw);else { dM(gw);gs(gw.firstChild);} } function gs(gw){ return gp(0, gw);} function gt(gw){ return gp(1, gw);} function gu(gw){ while(true){ const gx=gw.querySelector("[ws-template]");if(u(gx, null)){ const gy=gw.querySelector("[ws-children-template]");if(u(gy, null)){ const gz=gw.querySelectorAll("template[id]");for(let gF=1, gG=gz.length-1;gF<=gG;gF++){ const gA=gz[gF];if(go.Contains(gA)){ } else { bZ(gk, K(gA.getAttribute("id")), gA, null);go.SAdd(gA);} } const gB=gw.querySelectorAll("template[name]");for(let gH=1, gI=gB.length-1;gH<=gI;gH++){ const gC=gB[gH];if(go.Contains(gC)){ } else { bZ(gk, K(gC.getAttribute("name")), gC, null);go.SAdd(gC);} } return null;} else { const gD=gy.getAttribute("ws-children-template");gy.removeAttribute("ws-children-template");bZ(gk, K(gD), gy, null);gw=gw;} } else { const gE=gx.getAttribute("ws-template");(b3(gk, K(gE), gx))(null);gw=gw;} } } const gv=(gl==null?"":gl.$0).toLowerCase();bU(gk).set_Item(gv, gm);if(gm.hasChildNodes()){ gu(gm);gs(gm.firstChild);} }
function b0(gk, gl){ let gm;const gn=[];const go=[];const gp=[];const gq=[];const gr=new cC("New_5");const gs=cR(gl);try { while(gs.MoveNext()){ const gt=gs.Current;gr.set_Item(gt.Name, gt);} } finally { if(typeof gs=="object"&&a(gs))gs.Dispose();} let gu=dP(gk);const gv=(gE, gF) => { const gG=ek(gE, gF);go.push(el(gG));gp.push([gE, gG]);const gH=gg(gG.OnAfterRender);if(gH==null)return null;else { const gI=gH.$0;gq.push(() => { gI(gE);});return;} };const gw=(gE) => { let gF;const gG=(gF=null,[gr.TryGetValue(gE, {get:() => gF, set:(gJ) => { gF=gJ;}}), gF]);if(gG[0]){ const gH=gG[1];if(gH instanceof bK)return K(gH.Value);else if(gH instanceof bM)return K(b6.TextNode(gH.Value));else { const gI=gH.ForTextView();return gI==null?null:K(b6.TextView(gI.$0));} } else return null;};b2(gk, "[ws-hole]", (gE) => { const gF=gE.getAttribute("ws-hole");gE.removeAttribute("ws-hole");while(gE.hasChildNodes())gE.removeChild(gE.lastChild);const gG=gw(gF);if(gG!=null&&gG.$==1){ const gH=gG.$0;df(gE, gH.docNode);gn.push(dD.New(em(gE), gH.docNode, null, gE, b7(), null));go.push(gH.updates);} });b2(gk, "[ws-replace]", (gE) => { const gF=gw(gE.getAttribute("ws-replace"));if(gF!=null&&gF.$==1){ const gG=gF.$0;const gH=gE.parentNode;const gI=globalThis.document.createTextNode("");gH.replaceChild(gI, gE);const gJ=dm(gI, gG.docNode);gu=dP(gk);const gK=cg((gL) => gE===gL, gu);if(gK==null){ } else r(gu, gK.$0, gG.docNode);gn.push(dD.New(em(gH), gG.docNode, K([gJ, gI]), gH, b7(), null));go.push(gG.updates);} });let gx=false;b2(gk, "slot", (gE) => { const gF=gE.getAttribute("name");const gG=gF==""||gF==null?"default":gF.toLowerCase();if(gx&&gG=="default"||!u(gk.parentElement, null)){ } else { while(gE.hasChildNodes())gE.removeChild(gE.lastChild);if(gG=="default")gx=true;const gH=gw(gG);if(gH!=null&&gH.$==1){ const gI=gH.$0;df(gE, gI.docNode);gn.push(dD.New(em(gE), gI.docNode, null, gE, b7(), null));go.push(gI.updates);} } });b2(gk, "[ws-attr]", (gE) => { let gF;const gG=gE.getAttribute("ws-attr");gE.removeAttribute("ws-attr");const gH=(gF=null,[gr.TryGetValue(gG, {get:() => gF, set:(gJ) => { gF=gJ;}}), gF]);if(gH[0]){ const gI=gH[1];if(gI instanceof eB)gv(gE, gI.Value);else console.warn("Attribute hole filled with non-attribute data", gG);} });b2(gk, "[ws-on]", (gE) => { gv(gE, eO.Concat(cd((gF) => { let gG;const gH=eU(gF, [":"], 1);const gI=(gG=null,[gr.TryGetValue(o(gH, 1), {get:() => gG, set:(gK) => { gG=gK;}}), gG]);if(gI[0]){ const gJ=gI[1];return gJ instanceof eC?K(eD(o(gH, 0), gJ.Value)):gJ instanceof bN?K(eO.Handler(o(gH, 0), gJ.Value)):(console.warn("Event hole on"+o(gH, 0)+" filled with non-event data", o(gH, 1)),null);} else return null;}, eU(gE.getAttribute("ws-on"), [" "], 1))));gE.removeAttribute("ws-on");});b2(gk, "[ws-onafterrender]", (gE) => { let gF;const gG=gE.getAttribute("ws-onafterrender");const gH=(gF=null,[gr.TryGetValue(gG, {get:() => gF, set:(gJ) => { gF=gJ;}}), gF]);if(gH[0]){ const gI=gH[1];if(gI instanceof eP){ gE.removeAttribute("ws-onafterrender");gv(gE, eE(gI.Value));} else if(gI instanceof eQ){ gE.removeAttribute("ws-onafterrender");gv(gE, eE(gI.Value));} else console.warn("onafterrender hole filled with non-onafterrender data", gG);} });b2(gk, "[ws-var]", (gE) => { let gF;const gG=gE.getAttribute("ws-var");gE.removeAttribute("ws-var");const gH=(gF=null,[gr.TryGetValue(gG, {get:() => gF, set:(gI) => { gF=gI;}}), gF]);if(gH[0])gH[1].AddAttribute((gI) =>(gJ) => gv(gI, gJ), gE);});const gy=() => { b4("[ws-dom]", (gE) => { let gF;let gG;let gH;const gI=(gF=null,[gr.TryGetValue(gE.getAttribute("ws-dom").toLowerCase(), {get:() => gF, set:(gM) => { gF=gM;}}), gF]);if(gI[0]){ const gJ=gI[1];if(gJ instanceof cM){ const gK=gJ.Value;gE.removeAttribute("ws-dom");gG=gE;const gL=new MutationObserver((gM, gN) => { ck((gO) => { gO.removedNodes.forEach(gh((gP) => gP[0]===gG&&gO.addedNodes.length!==1?(gK.SetFinal(null),gN.disconnect()):null), null);}, gM);});if(gE.parentElement!==null)gL.observe(gE.parentElement, (gH={},gH.childList=true,gH));gK.Set(K(gE));c6((gM) => { if(gM!=null&&gM.$==1){ const gN=gM.$0;if(gG===gN){ } else { gG.replaceWith(gN);gG=gN;} } else { gG.remove();gL.disconnect();} }, gK.View);} } });};b2(gk, "[ws-attr-holes]", (gE) => { const gF=new RegExp(b5(), "g");const gG=eU(gE.getAttribute("ws-attr-holes"), [" "], 1);gE.removeAttribute("ws-attr-holes");for(let gH=0, gI=gG.length-1;gH<=gI;gH++)((() => { let gJ;const gK=o(gG, gH);const gL=gE.getAttribute(gK);let gM=null;let gN=0;const gO=[];while(gM=gF.exec(gL),gM!==null){ const gP=dN(gL, K(gN), K(gF.lastIndex-o(gM, 0).length-1));gN=gF.lastIndex;gO.push([gP, o(gM, 1)]);} const gQ=dN(gL, K(gN), null);gF.lastIndex=0;const gR=cl((gW, gX) =>(((gY) => { const gZ=gY[0];const g0=gY[1];return(g1) => { let g2;const g3=g1[0];const g4=g1[1];const g5=(g2=null,[gr.TryGetValue(g0, {get:() => g2, set:(g7) => { g2=g7;}}), g2]);const g6=g5[0]?g5[1].AsChoiceView:eR("");return g6.$==1?[gZ, g.Cons(g3==""?g6.$0:c4((g7) => g7+g3, g6.$0), g4)]:[gZ+g6.$0+g3, g4];};})(gW))(gX), gO, [gQ, g.Empty]);if(gR[1].$==1){ if(gR[1].$1.$==1){ if(gR[1].$1.$1.$==1){ if(gR[1].$1.$1.$1.$==0){ const gS=gR[0];gJ=eF(gK, c9((gW, gX, gY) => gS+gW+gX+gY, gR[1].$0, gR[1].$1.$0, gR[1].$1.$1.$0));} else { const gT=gR[0];gJ=eF(gK, c4((gW) => gT+eT("", gW), c_(gR[1])));} } else { const gU=gR[0];gJ=eF(gK, c$((gW, gX) => gU+gW+gX, gR[1].$0, gR[1].$1.$0));} } else if(gR[0]=="")gJ=eF(gK, gR[1].$0);else { const gV=gR[0];gJ=eF(gK, c4((gW) => gV+gW, gR[1].$0));} } else gJ=eO.Create(gK, gR[0]);return gv(gE, gJ);})());});let gz=gu;const gA=gq.length==0?K(() => { gy();}):K((gE) => { gy();ck((gF) => { gF(gE);}, gq);});const gB=!u(gu, null)&&gu.length===1&&(o(gu, 0)instanceof Node&&(o(gu, 0)instanceof Element&&(gm=o(gu, 0),true)))?K(gm):null;let gC={Els:gz, Dirty:true, Holes:gn, Attrs:gp, Render:gA?gA.$0:void 0, El:gB?gB.$0:void 0};let gD=gi(gC, ["Render", "El"]);return[gD, ei(c5(), da, go)];}
function b1(){ return de.GlobalHoles;}
function b2(gk, gl, gm){ dV(gk, gl, (gn) => { if(gn.closest("[ws-preserve]")==null)gm(gn);});}
function b3(gk, gl, gm){ const gn=bW(gm);return(go) => { bZ(gk, gl, gn, go);};}
function b4(gk, gl){ dW(gk, (gm) => { if(gm.closest("[ws-preserve]")==null)gl(gm);});}
function b5(){ return de.TextHoleRE;}
class b6 extends c { docNode;updates;static RunById(gk, gl){ const gm=globalThis.document.getElementById(gk);if(u(gm, null))k("invalid id: "+gk);else b6.Run(gm, gl);} static Convert(gk, gl){ return b6.Flatten(c2(gk, gl));} static Run(gk, gl){ df(gk, gl.docNode);b6.RunInPlace(false, gk, gl);} static Flatten(gk){ return b6.EmbedView(c4(b6.Concat, gk));} static get Empty(){ return b6.Mk(null, c5());} static RunInPlace(gk, gl, gm){ const gn=dh(gl, gm.docNode);c6(d3()||d_()?d$(di(gk, gn, gm.docNode)):() => { dj(gk, gn, gm.docNode);}, gm.updates);} static Concat(gk){ return ei(b6.Empty, b6.Append, eh(gk));} static EmbedView(gk){ const gl=dk();return b6.Mk(cY(gl), c4(() => { }, c8((gm) => { dl(gl, gm.docNode);return gm.updates;}, gk)));} static Mk(gk, gl){ return new b6(gk, gl);} static Append(gk, gl){ return b6.Mk(cZ(gk.docNode, gl.docNode), da(gk.updates, gl.updates));} static TextNode(gk){ return b6.Mk(c0(globalThis.document.createTextNode(gk)), c5());} static TextView(gk){ const gl=du();return b6.Mk(c1(gl), c4((gm) => { dv(gl, gm);}, gk));} constructor(gk, gl){ super();this.docNode=gk;this.updates=gl;} }
function b7(){ b8(b9()+1);return b9();}
function b8(gk){ dB.counter=gk;}
function b9(){ return dB.counter;}
function b_(gk, gl){ return{$:2, $0:gk, $1:gl};}
function b$(gk){ return{$:0, $0:gk};}
function ca(gk, gl){ return{$:3, $0:gk, $1:gl};}
class cb extends c { init;SSet(gk){ return cc(gk);} SInit(){ return this.init;} constructor(gk){ super();this.init=gk;} }
function cc(gk){ if(gk instanceof Array)return gk.slice();else if(gk instanceof g)return ce(gk);else { const gl=[];const gm=cR(gk);try { while(gm.MoveNext())gl.push(gm.Current);return gl;} finally { if(typeof gm=="object"&&a(gm))gm.Dispose();} } }
function cd(gk, gl){ const gm=[];for(let go=0, gp=gl.length-1;go<=gp;go++){ const gn=gk(gl[go]);if(gn==null){ } else gm.push(gn.$0);} return gm;}
function ce(gk){ const gl=[];let gm=gk;while(!(gm.$==0)){ gl.push(cy(gm));gm=cz(gm);} return gl;}
function cf(gk, gl){ if(gk<0)k("Negative size given.");else null;const gm=new Array(gk);for(let gn=0, go=gk-1;gn<=go;gn++)gm[gn]=gl(gn);return gm;}
function cg(gk, gl){ let gm=null;let gn=0;while(gn<gl.length&&gm==null){ gk(gl[gn])?gm=K(gn):void 0;gn=gn+1;} return gm;}
function ch(gk, gl){ let gm=null;let gn=0;while(gn<gl.length&&gm==null){ const go=gk(gl[gn]);if(go!=null&&go.$==1)gm=go;gn=gn+1;} return gm;}
function ci(gk, gl){ let gm=false;let gn=0;while(!gm&&gn<p(gl))if(gk(gl[gn]))gm=true;else gn=gn+1;return gm;}
function cj(gk){ return Array.prototype.concat.apply([], cc(gk));}
function ck(gk, gl){ for(let gm=0, gn=gl.length-1;gm<=gn;gm++)gk(gl[gm]);}
function cl(gk, gl, gm){ let gn=gm;const go=gl.length;for(let gp=1, gq=go;gp<=gq;gp++)gn=gk(gl[go-gp], gn);return gn;}
function cm(gk, gl){ const gm=new Array(gl.length);for(let gn=0, go=gl.length-1;gn<=go;gn++)gm[gn]=gk(gl[gn]);return gm;}
function cn(gk, gl){ const gm=[];for(let gn=0, go=gl.length-1;gn<=go;gn++)if(gk(gl[gn]))gm.push(gl[gn]);return gm;}
function co(gk, gl){ return cc(bc(gk, gl));}
function cp(gk, gl){ const gm=ch(gk, gl);return gm==null?k("KeyNotFoundException"):gm.$0;}
function cq(gk, gl){ let gm=true;let gn=0;while(gm&&gn<p(gl))if(gk(gl[gn]))gn=gn+1;else gm=false;return gm;}
function cr(gk, gl){ const gm=new Array(gk);for(let gn=0, go=gk-1;gn<=go;gn++)gm[gn]=gl;return gm;}
function cs(gk, gl){ return{k:gk, ct:gl};}
function ct(gk){ return{$:1, $0:gk};}
function cu(gk){ return{$:0, $0:gk};}
function cv(gk){ return{$:2, $0:gk};}
function cw(gk, gl){ return cx(cf(gk, gl));}
function cx(gk){ let gl=g.Empty;for(let gm=p(gk)-1, gn=0;gm>=gn;gm--)gl=g.Cons(o(gk, gm), gl);return gl;}
function cy(gk){ return gk.$==1?gk.$0:cA();}
function cz(gk){ return gk.$==1?gk.$1:cA();}
function cA(){ return k("The input list was empty.");}
class cB { }
class cC extends c { equals;hash;count;data;Clear(){ this.data=[];this.count=0;} set_Item(gk, gl){ this.set(gk, gl);} set(gk, gl){ const gm=this.hash(gk);const gn=this.data[gm];if(gn==null){ this.count=this.count+1;this.data[gm]=new Array({K:gk, V:gl});} else { const go=cg((gp) => this.equals.apply(null, [(l(gp))[0], gk]), gn);if(go==null){ this.count=this.count+1;gn.push({K:gk, V:gl});} else gn[go.$0]={K:gk, V:gl};} } TryGetValue(gk, gl){ const gm=this.data[this.hash(gk)];if(gm==null)return false;else { const gn=ch((go) => { const gp=l(go);return this.equals.apply(null, [gp[0], gk])?K(gp[1]):null;}, gm);return gn!=null&&gn.$==1&&(gl.set(gn.$0),true);} } ContainsKey(gk){ const gl=this.data[this.hash(gk)];return gl==null?false:ci((gm) => this.equals.apply(null, [(l(gm))[0], gk]), gl);} RemoveKey(gk){ return this.remove(gk);} get Keys(){ return new d2(this);} GetEnumerator(){ return cU(cj(cN(this.data)));} get Values(){ return new e2(this);} remove(gk){ const gl=this.hash(gk);const gm=this.data[gl];if(gm==null)return false;else { const gn=cn((go) =>!this.equals.apply(null, [(l(go))[0], gk]), gm);return p(gn)<gm.length&&(this.count=this.count-1,this.data[gl]=gn,true);} } Item(gk){ return this.get(gk);} get(gk){ const gl=this.data[this.hash(gk)];return gl==null?dc():cp((gm) => { const gn=l(gm);return this.equals.apply(null, [gn[0], gk])?K(gn[1]):null;}, gl);} static New_5(){ return new this("New_5");} static New_6(gk, gl, gm){ return new this("New_6", gk, gl, gm);} constructor(gk, gl, gm, gn){ if(gk=="New_5"){ gk="New_6";gl=[];gm=u;gn=x;} if(gk=="New_6"){ const go=gl;const gp=gm;const gq=gn;super();this.equals=gp;this.hash=gq;this.count=0;this.data=[];const gr=cR(go);try { while(gr.MoveNext()){ const gs=gr.Current;this.set(gs.K, gs.V);} } finally { if(typeof gr=="object"&&a(gr))gr.Dispose();} } } }
function cD(gk){ let gl;const gm=gk.s;if(gm==null||(gm!=null&&gm.$==2?(gl=gm.$1,false):gm!=null&&gm.$==3?(gl=gm.$1,false):true))void 0;else { gk.s=null;for(let go=0, gp=p(gl)-1;go<=gp;go++){ const gn=o(gl, go);if(typeof gn=="object")(((gq) => { cD(gq);})(gn));else gn();} } }
let cE=gc((gk) => class gl { static { cE=gk(this);} static GetCT;static Zero;static defCTS;static scheduler;static noneCT;static { this.noneCT=cF(false, []);this.scheduler=new cV();this.defCTS=[new cW()];this.Zero=bB();this.GetCT=(gm) => { gm.k(cu(gm.ct));};} });
function cF(gk, gl){ return{c:gk, r:gl};}
class cG extends c { equals;hash;data;count;SAdd(gk){ return this.add(gk);} Contains(gk){ const gl=this.data[this.hash(gk)];return gl==null?false:this.arrContains(gk, gl);} add(gk){ const gl=this.hash(gk);const gm=this.data[gl];return gm==null?(this.data[gl]=[gk],this.count=this.count+1,true):this.arrContains(gk, gm)?false:(gm.push(gk),this.count=this.count+1,true);} arrContains(gk, gl){ let gm=true;let gn=0;const go=gl.length;while(gm&&gn<go)if(this.equals.apply(null, [gl[gn], gk]))gm=false;else gn=gn+1;return!gm;} GetEnumerator(){ return cR(fj(this.data));} ExceptWith(gk){ const gl=cR(gk);try { while(gl.MoveNext())this.Remove(gl.Current);} finally { if(typeof gl=="object"&&a(gl))gl.Dispose();} } get Count(){ return this.count;} IntersectWith(gk){ const gl=new cG("New_4", gk, this.equals, this.hash);const gm=fj(this.data);for(let go=0, gp=gm.length-1;go<=gp;go++){ const gn=gm[go];if(!gl.Contains(gn))this.Remove(gn);} } Remove(gk){ const gl=this.data[this.hash(gk)];return gl==null?false:this.arrRemove(gk, gl)&&(this.count=this.count-1,true);} CopyTo(gk, gl){ const gm=fj(this.data);for(let gn=0, go=gm.length-1;gn<=go;gn++)r(gk, gn+gl, gm[gn]);} arrRemove(gk, gl){ let gm=true;let gn=0;const go=gl.length;while(gm&&gn<go)if(this.equals.apply(null, [gl[gn], gk])){ gl.splice(gn, 1);gm=false;} else gn=gn+1;return!gm;} static New_3(){ return new this("New_3");} static New_4(gk, gl, gm){ return new this("New_4", gk, gl, gm);} static New_2(gk){ return new this("New_2", gk);} constructor(gk, gl, gm, gn){ if(gk=="New_3"){ gk="New_4";gl=[];gm=u;gn=x;} let go;if(gk=="New_2"){ go=gl;gk="New_4";gl=go;gm=u;gn=x;} if(gk=="New_4"){ const gp=gl;const gq=gm;const gr=gn;super();this.equals=gq;this.hash=gr;this.data=[];this.count=0;const gs=cR(gp);try { while(gs.MoveNext())this.add(gs.Current);} finally { if(typeof gs=="object"&&a(gs))gs.Dispose();} } } }
let cH=gc((gk) => class gl extends c { static { cH=gk(this);} static init;id;vars;static initialized;static instances;static GetOrAddHoleFor(gm, gn, go){ let gp;const gq=cH.GetHolesFor(gm);const gr=(gp=null,[gq.TryGetValue(gn, {get:() => gp, set:(gt) => { gp=gt;}}), gp]);if(gr[0])return gr[1];else { const gs=go();gq.set_Item(gn, gs);return gs;} } static GetHolesFor(gm){ let gn;const go=(gn=null,[cH.initialized.TryGetValue(gm, {get:() => gn, set:(gq) => { gn=gq;}}), gn]);if(go[0])return go[1];else { const gp=new cC("New_5");cH.initialized.set_Item(gm, gp);return gp;} } static { cH.initialized=new cC("New_5");cH.instances=new cC("New_5");} });
class cI extends t { name;fillWith;get Name(){ return this.name;} ForTextView(){ return K(c4(String, this.fillWith.View));} AddAttribute(gk, gl){(gk(gl))(eH(this.fillWith));} get AsChoiceView(){ return eS(c4(String, this.fillWith.View));} constructor(gk, gl){ super();this.name=gk;this.fillWith=gl;} }
class cJ extends t { name;fillWith;get Name(){ return this.name;} ForTextView(){ return K(c4(String, this.fillWith.View));} AddAttribute(gk, gl){(gk(gl))(eI(this.fillWith));} get AsChoiceView(){ return eS(c4(String, this.fillWith.View));} constructor(gk, gl){ super();this.name=gk;this.fillWith=gl;} }
class cK extends t { name;fillWith;get Name(){ return this.name;} ForTextView(){ return K(c4((gk) =>(new Date(gk)).toLocaleString(), this.fillWith.View));} AddAttribute(gk, gl){(gk(gl))(eJ(this.fillWith));} get AsChoiceView(){ return eS(c4((gk) =>(new Date(gk)).toLocaleString(), this.fillWith.View));} constructor(gk, gl){ super();this.name=gk;this.fillWith=gl;} }
class cL extends t { name;fillWith;get Name(){ return this.name;} ForTextView(){ return K(c4(String, this.fillWith.View));} AddAttribute(gk, gl){(gk(gl))(eK(this.fillWith));} get AsChoiceView(){ return eS(c4(String, this.fillWith.View));} constructor(gk, gl){ super();this.name=gk;this.fillWith=gl;} }
class cM extends t { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} constructor(gk, gl){ super();this.name=gk;this.fillWith=gl;} }
function cN(gk){ let gl=[];let gm;for(var gn in gk)gl.push(gk[gn]);return gl;}
class cO extends t { name;fillWith;get Name(){ return this.name;} ForTextView(){ return K(c4((gk) => eT(",", gk), this.fillWith.View));} AddAttribute(gk, gl){(gk(gl))(eL(this.fillWith));} get AsChoiceView(){ return eS(c4(String, this.fillWith.View));} constructor(gk, gl){ super();this.name=gk;this.fillWith=gl;} }
class cP extends c { }
function cQ(gk, gl){ return f7(gk, -2147483648, 2147483647, gl);}
function cR(gk){ return gk instanceof Array?cS(gk):u(typeof gk, "string")?cT(gk):gk.GetEnumerator();}
function cS(gk){ return new dd(0, null, (gl) => { const gm=gl.s;return gm<p(gk)&&(gl.c=o(gk, gm),gl.s=gm+1,true);}, void 0);}
function cT(gk){ return new dd(0, null, (gl) => { const gm=gl.s;return gm<gk.length&&(gl.c=gk[gm],gl.s=gm+1,true);}, void 0);}
function cU(gk){ return gk instanceof Array?cS(gk):u(typeof gk, "string")?cT(gk):"GetEnumerator0"in gk?gk.GetEnumerator0():gk.GetEnumerator();}
class cV extends c { idle;robin;Fork(gk){ this.robin.push(gk);this.idle?(this.idle=false,setTimeout(() => { this.tick();}, 0)):void 0;} tick(){ const gk=Date.now();let gl=true;while(gl)if(this.robin.length===0){ this.idle=true;gl=false;} else {(this.robin.shift())();Date.now()-gk>40?(setTimeout(() => { this.tick();}, 0),gl=false):void 0;} } constructor(){ super();this.idle=true;this.robin=[];} }
class cW extends c { init;c;pending;r;constructor(){ super();this.c=false;this.pending=null;this.r=[];this.init=1;} }
function cX(gk){ return{$:6, $0:gk};}
function cY(gk){ return{$:2, $0:gk};}
function cZ(gk, gl){ return{$:0, $0:gk, $1:gl};}
function c0(gk){ return{$:5, $0:gk};}
function c1(gk){ return{$:4, $0:gk};}
function c2(gk, gl){ return c3((gm) => gm, gk, gl);}
function c3(gk, gl, gm){ const gn=[new cC("New_5")];return c4((go) => { const gp=gn[0];const gq=new cC("New_5");const gr=eg((gs) => { const gt=gk(gs);const gu=gp.ContainsKey(gt)?gp.Item(gt):gl(gs);gq.set_Item(gt, gu);return gu;}, cc(go));gn[0]=gq;return gr;}, gm);}
function c4(gk, gl){ return c7(() => M(gk, gl()));}
function c5(gk){ const gl={s:b$(gk)};return() => gl;}
function c6(gk, gl){ function gm(){ N(gl(), gk, () => { bA().Fork(gm);});} bA().Fork(gm);}
function c7(gk){ const gl={c:null, o:gk};return() => { let gm=gl.c;if(gm===null){ gm=gl.o();gl.c=gm;const gn=gm.s;if(gn!=null&&gn.$==0)gl.o=null;else O(gm, () => { gl.c=null;});return gm;} else return gm;};}
function c8(gk, gl){ return db(c4(gk, gl));}
function c9(gk, gl, gm, gn){ return c7(() => R(gk, gl(), gm(), gn()));}
function c_(gk){ return c7(() => S(bf((gl) => gl(), gk)));}
function c$(gk, gl, gm){ return c7(() => T(gk, gl(), gm()));}
function da(gk, gl){ return c7(() => U(gk(), gl()));}
function db(gk){ return c7(() => Z(gk()));}
function dc(){ throw new fs("New");}
class dd extends c { s;c;n;d;e;MoveNext(){ const gk=this.n(this);this.e=gk?1:2;return gk;} get Current(){ return this.e===1?this.c:this.e===0?k("Enumeration has not started. Call MoveNext."):k("Enumeration already finished.");} Dispose(){ if(this.d)this.d(this);} constructor(gk, gl, gm, gn){ super();this.s=gk;this.c=gl;this.n=gm;this.d=gn;this.e=0;} }
let de=gc((gk) => class gl { static { de=gk(this);} static RenderedFullDocTemplate;static TextHoleRE;static GlobalHoles;static LocalTemplatesLoaded;static LoadedTemplates;static { this.LoadedTemplates=new cC("New_5");this.LocalTemplatesLoaded=false;this.GlobalHoles=new cC("New_5");this.TextHoleRE="\\${([^}]+)}";this.RenderedFullDocTemplate=null;} });
function df(gk, gl){ dg(gk, gl, null);}
function dg(gk, gl, gm){ while(true){ if(gl!=null&&gl.$==1)return dn(gk, gl.$0.El, gm);else if(gl!=null&&gl.$==2){ const gn=gl.$0;gn.Dirty=false;gl=gn.Current;} else if(gl==null)return gm;else if(gl!=null&&gl.$==4)return dn(gk, gl.$0.Text, gm);else if(gl!=null&&gl.$==5)return dn(gk, gl.$0, gm);else if(gl!=null&&gl.$==6)return cl((gq, gr) =>((((gs) =>(gt) =>(gu) => gt==null||gt.constructor===Object?dg(gs, gt, gu):dn(gs, gt, gu))(gk))(gq))(gr), gl.$0.Els, gm);else { const go=gl.$1;const gp=gl.$0;gl=gp;gm=dg(gk, go, gm);} } }
function dh(gk, gl){ return e3(e4(), do_1(gk, eq(), gl));}
function di(gk, gl, gm){ if(d3()){ const gn=null;return br(() => { const go=e5(gm);const gp=ds(gl, go);const gq=dr(gl, go);return bs(d4(d5(gp, dq(gl, go))), () => bs(dp(gk, gl), () => bs(d4(gq), () => { gl.PreviousNodes=go;return bB(null);})));});} else return dp(gk, gl);}
function dj(gk, gl, gm){ const gn=e5(gm);dt(gk, gl.Top);gl.PreviousNodes=gn;}
function dk(){ return{Current:null, Dirty:false};}
function dl(gk, gl){ gk.Current=gl;gk.Dirty=true;}
function dm(gk, gl){ const gm=gk.parentNode;const gn=globalThis.document.createTextNode("");gm.insertBefore(gn, gk);dw(gk, gl);return gn;}
function dn(gk, gl, gm){ dX(gk, gm, gl);return gl;}
function do_1(gk, gl, gm){ df(gk, gm);const gn=ek(gk, gl);return dD.New(gn, gm, null, gk, b7(), gg(gn.OnAfterRender));}
function dp(gk, gl){ if(d_()){ const gm=(gn) => { requestAnimationFrame(() => { dt(gk, gl.Top);gn();});};return bD((gn, go, gp) => gm.apply(null, [gn, go, gp]));} else { dt(gk, gl.Top);return bB(null);} }
function dq(gk, gl){ return d8(cm((gm) => es(gm.Attr), e9(e8(gl, e7((gm) => er(gm.Attr), gk.PreviousNodes)))));}
function dr(gk, gl){ return d8(cm((gm) => eu(gm.Attr), e9(e8(gk.PreviousNodes, e7((gm) => et(gm.Attr), gl)))));}
function ds(gk, gl){ const gm=(go) => ev(go.Attr);const gn=(go) => e7(gm, go);return d8(cm((go) => ew(go.Attr), e9(e_(gn(gk.PreviousNodes), gn(gl)))));}
function dt(gk, gl){!gk?dx(gl):void 0;dy(gl.Children);dz(gl);}
function du(){ return{Text:globalThis.document.createTextNode(""), Dirty:false, Value:""};}
function dv(gk, gl){ gk.Value=gl;gk.Dirty=true;}
function dw(gk, gl){ dg(gk.parentNode, gl, gk);}
function dx(gk){ function gl(gm){ function gn(go){ while(true){ if(go!=null&&go.$==0){ const gp=go.$1;const gq=go.$0;if(gn(gq))return true;else go=gp;} else if(go!=null&&go.$==2){ const gr=go.$0;if(gr.Dirty)return true;else go=gr.Current;} else if(go!=null&&go.$==6){ const gs=go.$0;return gs.Dirty||ci(gl, gs.Holes);} else return false;} } return gn(gm.Children);} ez(gk.El, gk.Attr);if(gl(gk))dA(gk);}
function dy(gk){ while(true){ if(gk!=null&&gk.$==1)return dt(false, gk.$0);else if(gk!=null&&gk.$==2){ const gl=gk.$0;gk=gl.Current;} else if(gk==null)return null;else if(gk!=null&&gk.$==5)return null;else if(gk!=null&&gk.$==4){ const gm=gk.$0;return gm.Dirty?(gm.Text.nodeValue=gm.Value,gm.Dirty=false):null;} else if(gk!=null&&gk.$==6){ const gn=gk.$0;ck((gq) => { dt(false, gq);}, gn.Holes);ck((gq) => { ez(gq[0], gq[1]);}, gn.Attrs);return dz(gn);} else { const go=gk.$1;const gp=gk.$0;dy(gp);gk=go;} } }
function dz(gk){ const gl=gg(gk.Render);if(gl!=null&&gl.$==1){ gl.$0(gk.El);gf(gk, "Render", null);} }
function dA(gk){ const gl=gk.El;function gm(gq, gr){ while(true){ if(gq!=null&&gq.$==1)return gq.$0.El;else if(gq!=null&&gq.$==2){ const gs=gq.$0;if(gs.Dirty){ gs.Dirty=false;return dg(gl, gs.Current, gr);} else gq=gs.Current;} else if(gq==null)return gr;else if(gq!=null&&gq.$==4)return gq.$0.Text;else if(gq!=null&&gq.$==5)return gq.$0;else if(gq!=null&&gq.$==6){ const gt=gq.$0;if(gt.Dirty)gt.Dirty=false;return cl((gw, gx) => gw==null||gw.constructor===Object?gm(gw, gx):gw, gt.Els, gr);} else { const gu=gq.$1;const gv=gq.$0;gq=gv;gr=gm(gu, gr);} } } const gn=gk.El;f1((gq) => { dY(gn, gq);}, f0(f2(gk), fZ(gk.El, gg(gk.Delimiters))));let go=gk.Children;const gp=gg(gk.Delimiters);gm(go, gp!=null&&gp.$==1?gp.$0[1]:null);}
let dB=gc((gk) => class gl { static { dB=gk(this);} static counter;static { this.counter=0;} });
class dC extends Error { ct;static New(gk){ return new this("New", gk);} static New_1(gk, gl, gm){ return new this("New_1", gk, gl, gm);} constructor(gk, gl, gm, gn){ let go;if(gk=="New"){ go=gl;gk="New_1";gl="The operation was canceled.";gm=null;gn=go;} if(gk=="New_1"){ const gp=gl;const gq=gm;const gr=gn;super(gp);this.inner=gq;this.ct=gr;} } }
class dD { Attr;Children;Delimiters;El;ElKey;Render;Equals(gk){ return this.ElKey===gk.ElKey;} GetHashCode(){ return this.ElKey;} static New(gk, gl, gm, gn, go, gp){ const gq={Attr:gk, Children:gl, El:gn, ElKey:go};let gr=(gf(gq, "Delimiters", gm),gf(gq, "Render", gp),gq);return gd(dD, gr);} }
class dE extends b6 { docNode_1;updates_1;elt;rvUpdates;static TreeNode(gk, gl){ const gm=e1.Create(gl);const gn=cm((gq) => el(gq[1]), gk.Attrs);let go=ei(c5(), da, gn);let gp=da(go, gm.v);return new dE(cX(gk), gp, o(gk.Els, 0), gm);} constructor(gk, gl, gm, gn){ super(gk, gl);this.docNode_1=gk;this.updates_1=gl;this.elt=gm;this.rvUpdates=gn;} }
function dF(gk){ let gl=null;let gm=0;const gn=gk.textContent;const go=new RegExp(b5(), "g");while(gl=go.exec(gn),gl!==null){ gk.parentNode.insertBefore(globalThis.document.createTextNode(dN(gn, K(gm), K(go.lastIndex-o(gl, 0).length-1))), gk);gm=go.lastIndex;const gp=globalThis.document.createElement("span");gp.setAttribute("ws-replace", o(gl, 1).toLowerCase());gk.parentNode.insertBefore(gp, gk);} go.lastIndex=0;gk.textContent=dN(gn, K(gm), null);}
function dG(gk){ console.warn("Instantiating non-loaded template", gk);}
function dH(gk, gl, gm){ const gn=gk.querySelector("[ws-replace]");return u(gn, null)?(console.warn("Filling non-existent text hole", gm),null):(gn.parentNode.replaceChild(globalThis.document.createTextNode(gl), gn),K(gn.getAttribute("ws-replace")));}
function dI(gk, gl){ const gm=(gn) => { b2(gk, "["+gn+"]", (go) => { if(!gl.Contains(go.getAttribute(gn)))go.removeAttribute(gn);});};gm("ws-attr");gm("ws-onafterrender");gm("ws-var");b2(gk, "[ws-hole]", (gn) => { if(!gl.Contains(gn.getAttribute("ws-hole"))){ gn.removeAttribute("ws-hole");while(gn.hasChildNodes())gn.removeChild(gn.lastChild);} });b2(gk, "[ws-replace]", (gn) => { if(!gl.Contains(gn.getAttribute("ws-replace")))gn.parentNode.removeChild(gn);});b2(gk, "[ws-on]", (gn) => { gn.setAttribute("ws-on", eT(" ", cn((go) => gl.Contains(o(eU(go, [":"], 1), 1)), eU(gn.getAttribute("ws-on"), [" "], 1))));});b2(gk, "[ws-attr-holes]", (gn) => { const go=eU(gn.getAttribute("ws-attr-holes"), [" "], 1);for(let gs=0, gt=go.length-1;gs<=gt;gs++){ const gp=o(go, gs);let gq=new RegExp(b5(), "g");let gr=gn.getAttribute(gp).replace(gq, (gu, gv) => gl.Contains(gv)?gu:"");gn.setAttribute(gp, gr);} });}
function dJ(gk, gl){ dM(gl);const gm=gl.nodeName.toLowerCase();const gn=gk.querySelector("[ws-attr="+gm+"]");if(u(gn, null))console.warn("Filling non-existent attr hole", gm);else { gn.removeAttribute("ws-attr");for(let gp=0, gq=gl.attributes.length-1;gp<=gq;gp++){ const go=gl.attributes.item(gp);if(go.name=="class"&&gn.hasAttribute("class"))gn.setAttribute("class", gn.getAttribute("class")+" "+go.nodeValue);else gn.setAttribute(go.name, go.nodeValue);} } }
function dK(gk, gl){ const gm=(gn) => { b2(gk, "["+gn+"]", (go) => { let gp;const gq=(gp=null,[gl.TryGetValue(go.getAttribute(gn).toLowerCase(), {get:() => gp, set:(gr) => { gp=gr;}}), gp]);if(gq[0])go.setAttribute(gn, gq[1]);});};gm("ws-hole");gm("ws-replace");gm("ws-attr");gm("ws-onafterrender");gm("ws-var");b2(gk, "[ws-on]", (gn) => { gn.setAttribute("ws-on", eT(" ", cm((go) => { let gp;const gq=eU(go, [":"], 1);const gr=(gp=null,[gl.TryGetValue(o(gq, 1), {get:() => gp, set:(gs) => { gp=gs;}}), gp]);return gr[0]?o(gq, 0)+":"+gr[1]:go;}, eU(gn.getAttribute("ws-on"), [" "], 1))));});b2(gk, "[ws-attr-holes]", (gn) => { const go=eU(gn.getAttribute("ws-attr-holes"), [" "], 1);for(let gp=0, gq=go.length-1;gp<=gq;gp++)((() => { const gr=o(go, gp);return gn.setAttribute(gr, be((gs, gt) => { const gu=l(gt);return gs.replace(new RegExp("\\${"+gu[0]+"}", "ig"), "${"+gu[1]+"}");}, gn.getAttribute(gr), gl));})());});}
function dL(gk, gl, gm){ while(true){ if(gk.hasChildNodes())gm=gl.insertBefore(gk.lastChild, gm);else return null;} }
function dM(gk){ const gl=gk.attributes;const gm=[];const gn=[];const go=[];for(let gt=0, gu=gl.length-1;gt<=gu;gt++){ const gp=gl.item(gt);if(eV(gp.nodeName, "ws-on")&&gp.nodeName!="ws-onafterrender"&&gp.nodeName!="ws-on"){ gm.push(gp.nodeName);gn.push(dN(gp.nodeName, K("ws-on".length), null)+":"+gp.nodeValue.toLowerCase());} else if(!eV(gp.nodeName, "ws-")&&(new RegExp(b5())).test(gp.nodeValue)){ let gq=new RegExp(b5(), "g");let gr=gp.nodeValue.replace(gq, (gv, gw) =>"${"+gw.toLowerCase()+"}");gp.nodeValue=gr;go.push(gp.nodeName);} else void 0;} if(!(gn.length==0))gk.setAttribute("ws-on", eT(" ", gn));if(!(go.length==0))gk.setAttribute("ws-attr-holes", eT(" ", go));const gs=(gv) => { const gw=gk.getAttribute(gv);if(gw==null){ } else gk.setAttribute(gv, gw.toLowerCase());};gs("ws-hole");gs("ws-replace");gs("ws-attr");gs("ws-onafterrender");gs("ws-var");ck((gv) => { gk.removeAttribute(gv);}, gm);}
function dN(gk, gl, gm){ if(gl==null){ if(gm!=null&&gm.$==1){ const gn=gm.$0;return gn<0?"":gk.slice(0, gn+1);} else return"";} else if(gm==null)return gk.slice(gl.$0);else { const go=gm.$0;return go<0?"":gk.slice(gl.$0, go+1);} }
function dO(gk){ const gl=globalThis.document.createElement("div");if(!dQ().test(gk)){ gl.appendChild(globalThis.document.createTextNode(gk));return gl;} else { const gm=dU().exec(gk);const gn=u(gm, null)?"":o(gm, 1).toLowerCase();const go=(dR())[gn];const gp=go?go:dS();gl.innerHTML=gp[1]+gk.replace(dT(), "<$1></$2>")+gp[2];function gq(gr, gs){ while(true){ if(gs===0)return gr;else { const gt=gs;gr=gr.lastChild;gs=gt-1;} } } return gq(gl, gp[0]);} }
function dP(gk){ const gl=[];for(let gm=0, gn=gk.childNodes.length-1;gm<=gn;gm++)gl.push(gk.childNodes[gm]);return gl;}
function dQ(){ return fk.rhtml;}
function dR(){ return fk.wrapMap;}
function dS(){ return fk.defaultWrap;}
function dT(){ return fk.rxhtmlTag;}
function dU(){ return fk.rtagName;}
function dV(gk, gl, gm){ const gn=gk.querySelectorAll(gl);for(let go=0, gp=gn.length-1;go<=gp;go++)gm(gn[go]);}
function dW(gk, gl){ const gm=globalThis.document.querySelectorAll(gk);for(let gn=0, go=gm.length-1;gn<=go;gn++)gl(gm[gn]);}
function dX(gk, gl, gm){ let gn;if(gm.parentNode===gk){ const go=gm.nextSibling;let gp=u(go, null)?null:go;gn=gl===gp;} else gn=false;if(!gn)gk.insertBefore(gm, gl);}
function dY(gk, gl){ if(gl.parentNode===gk)gk.removeChild(gl);}
function dZ(){ return k("The input sequence has an insufficient number of elements.");}
function d0(gk, gl){ let gm=true;let gn=0;while(gm&&gn<p(gl))if(u(gl[gn], gk))gm=false;else gn=gn+1;return!gm;}
function d1(){ return k("The input must be non-negative.");}
class d2 extends c { d;GetEnumerator(){ return cR(bf((gk) => gk.K, this.d));} constructor(gk){ super();this.d=gk;} }
function d3(){ return e$();}
function d4(gk){ const gl=null;return br(() => bs(d6(() => { }, fa(gk)), () => { fb(gk);return bB(null);}));}
function d5(gk, gl){ return d7(fm(gk.$0, gl.$0));}
function d6(gk, gl){ const gm=gl.Duration;if(gm===0)return bt();else { const gn=(go) => { function gp(gq){ return(gr) => { const gs=gr-gq;gl.Compute(gs);gk();return gs<=gm?void requestAnimationFrame((gt) => {(gp(gq))(gt);}):go();};} requestAnimationFrame((gq) => {(gp(gq))(gq);});};return bD((go, gp, gq) => gn.apply(null, [go, gp, gq]));} }
function d7(gk){ return{$:0, $0:gk};}
function d8(gk){ return d7(fo(bf(fd, gk)));}
function d9(){ return d7(fp());}
function d_(){ return fh.BatchUpdatesEnabled;}
function d$(gk){ const gl=[0];function gm(){ const gn=null;return br(() => bs(gk, () => { const go=gl[0];return u(go, 1)?(gl[0]=0,bt()):u(go, 2)?(gl[0]=1,gm()):bt();}));} return() => { const gn=gl[0];if(u(gn, 0)){ gl[0]=1;bv(gm(), null);} else u(gn, 1)?gl[0]=2:void 0;};}
function ea(){ return fi.AjaxProvider;}
function eb(gk){ return JSON.stringify(gk);}
function ec(gk){ return bq(cm((gl) =>[gl[0], gl[1]], co((gl) => gl[0], gk.concat([["content-type", "application/json"]]))));}
function ed(){ return fi.EndPoint;}
function ee(gk, gl, gm, gn, go, gp, gq){ let gr=new XMLHttpRequest();let gs=document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"), "$1");gr.open("POST", gl, gk);if(gk==true)gr.withCredentials=true;let gt;for(var gv in gm)gr.setRequestHeader(gv, gm[gv]);if(gs)gr.setRequestHeader("x-csrftoken", gs);function gu(){ if(gr.status==200)go(gr.responseText);else if(gq&&gr.status==403&&gr.responseText=="CSRF")gq();else { let gw="Response status is not 200: ";gp(new Error(gw+gr.status));} } if("onload"in gr)gr.onload=gr.onerror=gr.onabort=gu;else gr.onreadystatechange=() => { if(gr.readyState==4)gu();};gr.send(gn);}
function ef(gk, gl, gm, gn){ const go={DynElem:gk, DynFlags:gl, DynNodes:gm};gf(go, "OnAfterRender", gn);return go;}
function eg(gk, gl){ for(let gm=0, gn=gl.length-1;gm<=gn;gm++)gl[gm]=gk(gl[gm]);return gl;}
function eh(gk){ if(gk instanceof Array)return gk;else if(gk instanceof g)return ce(gk);else if(gk===null)return[];else { const gl=[];const gm=cR(gk);try { while(gm.MoveNext())gl.push(gm.Current);return gl;} finally { if(typeof gm=="object"&&a(gm))gm.Dispose();} } }
function ei(gk, gl, gm){ const gn=p(gm);function go(gp){ return(gq) => { let gr;switch(gq<=0?0:gq===1?gp>=0&&gp<gn?1:(gr=gq,2):(gr=gq,2)){ case 0:return gk;case 1:return o(gm, gp);case 2:const gs=gq/2>>0;return gl((go(gp))(gs), (go(gp+gs))(gq-gs));} };} return(go(0))(gn);}
function ej(gk, gl, gm, gn){ const go=p(gn);function gp(gq){ return(gr) => { let gs;switch(gr<=0?0:gr===1?gq>=0&&gq<go?1:(gs=gr,2):(gs=gr,2)){ case 0:return gl;case 1:return gk(o(gn, gq));case 2:const gt=gr/2>>0;return gm((gp(gq))(gt), (gp(gq+gt))(gr-gt));} };} return(gp(0))(go);}
function ek(gk, gl){ const gm=[];const gn=[];function go(gr){ while(true){ if(!(gr===null)){ if(gr!=null&&gr.$==1)return gm.push(gr.$0);else if(gr!=null&&gr.$==2){ const gs=gr.$1;const gt=gr.$0;go(gt);gr=gs;} else return gr!=null&&gr.$==3?gr.$0(gk):gr!=null&&gr.$==4?gn.push(gr.$0):null;} else return null;} } go(gl);const gp=gm.slice(0);let gq=ef(gk, en(gl), gp, gn.length===0?null:K((gr) => { ba((gs) => { gs(gr);}, gn);}));return gq;}
function el(gk){ return ej((gl) => gl.NChanged, c5(), da, gk.DynNodes);}
function em(gk){ return ef(gk, 0, [], null);}
function en(gk){ return gk!==null&&gk.hasOwnProperty("flags")?gk.flags:0;}
function eo(gk){ return eO.A3(gk);}
function ep(gk, gl){ return eO.A1(new fr(gk, gl));}
function eq(){ return ft.EmptyAttr;}
function er(gk){ const gl=2;return(gk.DynFlags&gl)===gl;}
function es(gk){ return ey(gk, (gl, gm) => gl.NGetExitAnim(gm));}
function et(gk){ const gl=1;return(gk.DynFlags&gl)===gl;}
function eu(gk){ return ey(gk, (gl, gm) => gl.NGetEnterAnim(gm));}
function ev(gk){ const gl=4;return(gk.DynFlags&gl)===gl;}
function ew(gk){ return ey(gk, (gl, gm) => gl.NGetChangeAnim(gm));}
function ex(gk, gl){ if(gk===null)return gl;else if(gl===null)return gk;else { const gm=eO.A2(gk, gl);eA(gm, en(gk)|en(gl));return gm;} }
function ey(gk, gl){ return d8(cm((gm) => gl(gm, gk.DynElem), gk.DynNodes));}
function ez(gk, gl){ ck((gm) => { gm.NSync(gk);}, gl.DynNodes);}
function eA(gk, gl){ gk.flags=gl;}
class eB extends t { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
class eC extends t { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
function eD(gk, gl){ return eo((gm) => { gm.addEventListener(gk, (gn) =>(gl(gm))(gn), false);});}
function eE(gk){ return eO.A4(gk);}
function eF(gk, gl){ return ep(gl, (gm) =>(gn) => gm.setAttribute(gk, gn));}
function eG(gk){ return eM(fR(), gk);}
function eH(gk){ return eM(fS(), gk);}
function eI(gk){ return eM(fT(), gk);}
function eJ(gk){ return eM(fU(), gk);}
function eK(gk){ return eM(fV(), gk);}
function eL(gk){ return eM(fW(), gk);}
function eM(gk, gl){ const gm=gk(gl);return eO.Append(eo(gm[0]), eN(gm[1], gm[2]));}
function eN(gk, gl){ return ep(gl, gk);}
class eO { static Handler(gk, gl){ return eO.HandlerImpl(gk, gl);} static Concat(gk){ const gl=eh(gk);return ei(eq(), eO.Append, gl);} static Create(gk, gl){ return eo((gm) => { gm.setAttribute(gk, gl);});} static HandlerImpl(gk, gl){ return eo((gm) => { gm.addEventListener(gk, (gn) =>(gl(gm))(gn), false);});} static Append(gk, gl){ return ex(gk, gl);} static A4(gk){ return gd(eO, {$:4, $0:gk});} static A3(gk){ return gd(eO, {$:3, $0:gk});} static A1(gk){ return gd(eO, {$:1, $0:gk});} static A2(gk, gl){ return gd(eO, {$:2, $0:gk, $1:gl});} }
class eP extends t { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
class eQ extends t { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
function eR(gk){ return{$:0, $0:gk};}
function eS(gk){ return{$:1, $0:gk};}
function eT(gk, gl){ return cc(gl).join(gk);}
function eU(gk, gl, gm){ return eW(gk, new RegExp("["+eX(gl.join(""))+"]"), gm);}
function eV(gk, gl){ return gk.substring(0, gl.length)==gl;}
function eW(gk, gl, gm){ return gm===1?cn((gn) => gn!=="", eY(gk, gl)):eY(gk, gl);}
function eX(gk){ return gk.replace(new RegExp("[-\\/\\\\^$*+?.()|[\\]{}]", "g"), "\\$&");}
function eY(gk, gl){ return gk.split(gl);}
function eZ(gk, gl){ return bo(gk, e0(gl));}
function e0(gk){ return gk==null?"":gk;}
class e1 { c;s;v;static Create(gk){ let gl;gl=null;gl=e1.New(gk, null, () => { let gm;gm=gl.s;return gm===null?(gm=V(gl.c()),gl.s=gm,O(gm, () => { gl.s=null;}),gm):gm;});return gl;} static New(gk, gl, gm){ return gd(e1, {c:gk, s:gl, v:gm});} }
class e2 extends c { d;GetEnumerator(){ return cR(bf((gk) => gk.V, this.d));} constructor(gk){ super();this.d=gk;} }
function e3(gk, gl){ return{PreviousNodes:gk, Top:gl};}
function e4(){ return e6(new cG("New_3"));}
function e5(gk){ const gl=[];function gm(gp, gq){ while(true)switch(gp){ case 0:if(gq!=null&&gq.$==0){ const gr=gq.$1;const gs=gq.$0;gm(0, gs);gq=gr;} else if(gq!=null&&gq.$==1){ const gt=gq.$0;gq=gt;gp=1;} else if(gq!=null&&gq.$==2){ const gu=gq.$0;gq=gu.Current;} else if(gq!=null&&gq.$==6){ const gv=gq.$0.Holes;return(((gw) =>(gx) => { ck(gw, gx);})(go))(gv);} else return null;break;case 1:gl.push(gq);gq=gq.Children;gp=0;break;} } function gn(gp){ return gm(0, gp);} function go(gp){ return gm(1, gp);} gn(gk);return e6(new cG("New_2", gl));}
function e6(gk){ return{$:0, $0:gk};}
function e7(gk, gl){ return e6(fv(gk, gl.$0));}
function e8(gk, gl){ return e6(fw(gk.$0, gl.$0));}
function e9(gk){ return fx(gk.$0);}
function e_(gk, gl){ return e6(fy(gk.$0, gl.$0));}
function e$(){ return fl.UseAnimations;}
function fa(gk){ return fc(cd((gl) => gl.$==1?K(gl.$0):null, fn(gk.$0)));}
function fb(gk){ ck((gl) => { if(gl.$==0)gl.$0();}, fn(gk.$0));}
function fc(gk){ const gl=eh(gk);const gm=p(gl);if(gm===0)return fe();else if(gm===1)return o(gl, 0);else { const gn=bi(bf((gp) => gp.Duration, gl));const go=cm((gp) => fg(gn, gp), gl);return ff(gn, (gp) => { ck((gq) => { gq.Compute(gp);}, go);});} }
function fd(gk){ return gk.$0;}
function fe(gk){ return ff(0, () => gk);}
function ff(gk, gl){ return{Compute:gl, Duration:gk};}
function fg(gk, gl){ const gm=gl.Compute;const gn=gl.Duration;const go=f8(() => gl.Compute(gl.Duration));return{Compute:(gp) => gp>=gn?go.f():gm(gp), Duration:gk};}
let fh=gc((gk) => class gl { static { fh=gk(this);} static BatchUpdatesEnabled;static { this.BatchUpdatesEnabled=true;} });
let fi=gc((gk) => class gl { static { fi=gk(this);} static AjaxProvider;static EndPoint;static { this.EndPoint=globalThis.location.origin;this.AjaxProvider=new fq();} });
function fj(gk){ let gl=[];let gm;for(var gn in gk)gl.push.apply(gl, gk[gn]);return gl;}
let fk=gc((gk) => class gl { static { fk=gk(this);} static defaultWrap;static wrapMap;static rhtml;static rtagName;static rxhtmlTag;static { this.rxhtmlTag=new RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>", "gi");this.rtagName=new RegExp("<([\\w:]+)");this.rhtml=new RegExp("<|&#?\\w+;");const gm=[1, "<table>", "</table>"];let gn=Object.fromEntries([["option", [1, "<select multiple='multiple'>", "</select>"]], ["legend", [1, "<fieldset>", "</fieldset>"]], ["area", [1, "<map>", "</map>"]], ["param", [1, "<object>", "</object>"]], ["thead", gm], ["tbody", gm], ["tfoot", gm], ["tr", [2, "<table><tbody>", "</tbody></table>"]], ["col", [2, "<table><colgroup>", "</colgoup></table>"]], ["td", [3, "<table><tbody><tr>", "</tr></tbody></table>"]]]);this.wrapMap=gn;this.defaultWrap=[0, "", ""];} });
let fl=gc((gk) => class gl { static { fl=gk(this);} static UseAnimations;static CubicInOut;static { this.CubicInOut=fu.Custom((gm) => { const gn=gm*gm;return 3*gn-2*(gn*gm);});this.UseAnimations=true;} });
function fm(gk, gl){ return gk.$==0?gl:gl.$==0?gk:{$:2, $0:gk, $1:gl};}
function fn(gk){ const gl=[];function gm(gn){ while(true){ if(gn.$==1)return gl.push(gn.$0);else if(gn.$==2){ const go=gn.$1;const gp=gn.$0;gm(gp);gn=go;} else return gn.$==3?ck((gq) => { gl.push(gq);}, gn.$0):null;} } gm(gk);return gl.slice(0);}
function fo(gk){ const gl=eh(gk);return ei(fp(), fm, gl);}
function fp(){ return f$.Empty;}
class fq extends c { Async(gk, gl, gm, gn, go){ ee(true, gk, gl, gm, gn, go, () => { ee(true, gk, gl, gm, gn, go, void 0);});} }
class fr extends c { push;value;dirty;updates;get NChanged(){ return this.updates;} NGetExitAnim(gk){ return d9();} NGetEnterAnim(gk){ return d9();} NGetChangeAnim(gk){ return d9();} NSync(gk){ if(this.dirty){(this.push(gk))(this.value);this.dirty=false;} } constructor(gk, gl){ super();this.push=gl;this.value=void 0;this.dirty=false;this.updates=c4((gm) => { this.value=gm;this.dirty=true;}, gk);} }
class fs extends Error { static New(){ return new this("New");} static New_1(gk){ return new this("New_1", gk);} constructor(gk, gl){ if(gk=="New"){ gk="New_1";gl="The given key was not present in the dictionary.";} if(gk=="New_1"){ const gm=gl;super(gm);} } }
let ft=gc((gk) => class gl { static { ft=gk(this);} static FloatApplyChecked;static FloatGetChecked;static FloatSetChecked;static FloatApplyUnchecked;static FloatGetUnchecked;static FloatSetUnchecked;static IntApplyChecked;static IntGetChecked;static IntSetChecked;static IntApplyUnchecked;static IntGetUnchecked;static IntSetUnchecked;static FileApplyUnchecked;static FileGetUnchecked;static FileSetUnchecked;static DateTimeApplyUnchecked;static DateTimeGetUnchecked;static DateTimeSetUnchecked;static StringListApply;static StringListGet;static StringListSet;static StringApply;static StringGet;static StringSet;static BoolCheckedApply;static EmptyAttr;static { this.EmptyAttr=null;this.BoolCheckedApply=(gC) =>[(gD) => { gD.addEventListener("change", () => gC.Get()!=gD.checked?gC.Set(gD.checked):null);}, (gD) =>(gE) => gE!=null&&gE.$==1?void(gD.checked=gE.$0):null, c4(K, gC.View)];this.StringSet=(gC) =>(gD) => { gC.value=gD;};this.StringGet=(gC) => K(gC.value);const gm=fB();const gn=fA();this.StringApply=(gC) => fz(gm, gn, gC);this.StringListSet=(gC) =>(gD) => { const gE=gC.options;for(let gF=0, gG=gE.length-1;gF<=gG;gF++)((() => { const gH=gE.item(gF);gH.selected=d0(gH.value, gD);})());};this.StringListGet=(gC) => { const gD=gC.selectedOptions;return K(cc(bg(() => bh((gE) =>[gD.item(gE).value], m(0, gD.length-1)))));};const go=fD();const gp=fC();this.StringListApply=(gC) => fz(go, gp, gC);this.DateTimeSetUnchecked=(gC) =>(gD) => { gC.value=(new Date(gD)).toLocaleString();};this.DateTimeGetUnchecked=(gC) => { let gD;let gE;const gF=gC.value;if(fX(gF))return K(-8640000000000000);else { gD=0;const gG=f6(gF);let gH=gG!=null&&gG.$==1&&(gD=gG.$0,true);gE=[gH, gD];return gE[0]?K(gE[1]):null;} };const gq=fF();const gr=fE();this.DateTimeApplyUnchecked=(gC) => fz(gq, gr, gC);this.FileSetUnchecked=() =>() => null;this.FileGetUnchecked=(gC) => { const gD=gC.files;return K(cc(bg(() => bf((gE) => gD.item(gE), m(0, gD.length-1)))));};const gs=fI();const gt=fH();this.FileApplyUnchecked=(gC) => fG(gs, gt, gC);this.IntSetUnchecked=(gC) =>(gD) => { gC.value=String(gD);};this.IntGetUnchecked=(gC) => { const gD=gC.value;if(fX(gD))return K(0);else { const gE=+gD;return gE!==gE>>0?null:K(gE);} };const gu=fK();const gv=fJ();this.IntApplyUnchecked=(gC) => fz(gu, gv, gC);this.IntSetChecked=(gC) =>(gD) => { const gE=gD.Input;return gC.value!=gE?void(gC.value=gE):null;};this.IntGetChecked=(gC) => { let gD;let gE;const gF=gC.value;if(fX(gF))gD=(gC.checkValidity?gC.checkValidity():true)?fY.Blank(gF):fY.Invalid(gF);else { const gG=(gE=0,[cQ(gF, {get:() => gE, set:(gH) => { gE=gH;}}), gE]);gD=gG[0]?fY.Valid(gG[1], gF):fY.Invalid(gF);} return K(gD);};const gw=fM();const gx=fL();this.IntApplyChecked=(gC) => fz(gw, gx, gC);this.FloatSetUnchecked=(gC) =>(gD) => { gC.value=String(gD);};this.FloatGetUnchecked=(gC) => { const gD=gC.value;if(fX(gD))return K(0);else { const gE=+gD;return isNaN(gE)?null:K(gE);} };const gy=fO();const gz=fN();this.FloatApplyUnchecked=(gC) => fz(gy, gz, gC);this.FloatSetChecked=(gC) =>(gD) => { const gE=gD.Input;return gC.value!=gE?void(gC.value=gE):null;};this.FloatGetChecked=(gC) => { let gD;const gE=gC.value;if(fX(gE))gD=(gC.checkValidity?gC.checkValidity():true)?fY.Blank(gE):fY.Invalid(gE);else { const gF=+gE;gD=isNaN(gF)?fY.Invalid(gE):fY.Valid(gF, gE);} return K(gD);};const gA=fQ();const gB=fP();this.FloatApplyChecked=(gC) => fz(gA, gB, gC);} });
class fu extends c { transformTime;static Custom(gk){ return new fu(gk);} constructor(gk){ super();this.transformTime=gk;} }
function fv(gk, gl){ return new cG("New_2", cn(gk, fx(gl)));}
function fw(gk, gl){ const gm=new cG("New_2", fx(gl));gm.ExceptWith(fx(gk));return gm;}
function fx(gk){ const gl=cr(gk.Count, void 0);gk.CopyTo(gl, 0);return gl;}
function fy(gk, gl){ const gm=new cG("New_2", fx(gk));gm.IntersectWith(fx(gl));return gm;}
function fz(gk, gl, gm){ let gn;gn=null;return[(go) => { const gp=() => { gm.UpdateMaybe((gq) => { let gr;gn=gk(go);return gn!=null&&gn.$==1&&(!u(gn.$0, gq)&&(gr=[gn, gn.$0],true))?gr[0]:null;});};go.addEventListener("change", gp);go.addEventListener("input", gp);go.addEventListener("keypress", gp);}, (go) => { const gp=gl(go);return(gq) => gq==null?null:gp(gq.$0);}, c4((go) => { let gp;return gn!=null&&gn.$==1&&(u(gn.$0, go)&&(gp=gn.$0,true))?null:K(go);}, gm.View)];}
function fA(){ return ft.StringSet;}
function fB(){ return ft.StringGet;}
function fC(){ return ft.StringListSet;}
function fD(){ return ft.StringListGet;}
function fE(){ return ft.DateTimeSetUnchecked;}
function fF(){ return ft.DateTimeGetUnchecked;}
function fG(gk, gl, gm){ let gn;gn=null;return[(go) => { go.addEventListener("change", () => { gm.UpdateMaybe((gp) => { let gq;gn=gk(go);return gn!=null&&gn.$==1&&(gn.$0!==gp&&(gq=[gn, gn.$0],true))?gq[0]:null;});});}, (go) => { const gp=gl(go);return(gq) => gq==null?null:gp(gq.$0);}, c4((go) => { let gp;return gn!=null&&gn.$==1&&(u(gn.$0, go)&&(gp=gn.$0,true))?null:K(go);}, gm.View)];}
function fH(){ return ft.FileSetUnchecked;}
function fI(){ return ft.FileGetUnchecked;}
function fJ(){ return ft.IntSetUnchecked;}
function fK(){ return ft.IntGetUnchecked;}
function fL(){ return ft.IntSetChecked;}
function fM(){ return ft.IntGetChecked;}
function fN(){ return ft.FloatSetUnchecked;}
function fO(){ return ft.FloatGetUnchecked;}
function fP(){ return ft.FloatSetChecked;}
function fQ(){ return ft.FloatGetChecked;}
function fR(){ return ft.StringApply;}
function fS(){ return ft.FloatApplyUnchecked;}
function fT(){ return ft.BoolCheckedApply;}
function fU(){ return ft.DateTimeApplyUnchecked;}
function fV(){ return ft.FileApplyUnchecked;}
function fW(){ return ft.StringListApply;}
function fX(gk){ return eZ(f5, gk);}
class fY { get Input(){ return this.$==1?this.$0:this.$==2?this.$0:this.$1;} static Blank(gk){ return gd(fY, {$:2, $0:gk});} static Invalid(gk){ return gd(fY, {$:1, $0:gk});} static Valid(gk, gl){ return gd(fY, {$:0, $0:gk, $1:gl});} }
function fZ(gk, gl){ let gm;if(gl!=null&&gl.$==1){ const gn=[];gm=gl.$0[0].nextSibling;while(gm!==gl.$0[1]){ gn.push(gm);gm=gm.nextSibling;} return f3(gn);} else { let go=gk.childNodes.length;const gp=gk.childNodes;let gq=cf(go, (gr) => gp[gr]);return f3(gq);} }
function f0(gk, gl){ const gm=gk.$0;return f3(cn((gn) => cq((go) =>!(gn===go), gm), gl.$0));}
function f1(gk, gl){ ck(gk, gl.$0);}
function f2(gk){ const gl=[];function gm(gn){ while(true){ if(gn!=null&&gn.$==2){ const go=gn.$0;gn=go.Current;} else if(gn!=null&&gn.$==1)return gl.push(gn.$0.El);else if(gn==null)return null;else if(gn!=null&&gn.$==5)return gl.push(gn.$0);else if(gn!=null&&gn.$==4)return gl.push(gn.$0.Text);else if(gn!=null&&gn.$==6){ const gp=gn.$0.Els;return(((gs) =>(gt) => { ck(gs, gt);})((gs) => { if(gs==null||gs.constructor===Object)gm(gs);else gl.push(gs);}))(gp);} else { const gq=gn.$1;const gr=gn.$0;gm(gr);gn=gq;} } } gm(gk.Children);return f3(eh(gl));}
function f3(gk){ return{$:0, $0:gk};}
function f4(gk){ gk.splice(0, p(gk));}
function f5(gk){ return gk.match(new RegExp("\\s"))!==null;}
function f6(gk){ const gl=Date.parse(gk);return isNaN(gl)?null:K(gl);}
function f7(gk, gl, gm, gn){ const go=+gk;const gp=go===go-go%1&&go>=gl&&go<=gm;if(gp)gn.set(go);return gp;}
function f8(gk){ return ga(false, gk, f9);}
function f9(){ const gk=this.v();this.c=true;this.v=gk;this.f=f_;return gk;}
function f_(){ return this.v;}
let f$=gc((gk) => class gl { static { f$=gk(this);} static Empty;static { this.Empty={$:0};} });
function ga(gk, gl, gm){ return{c:gk, v:gl, f:gm};}
gj(() => { b();});
gb();

